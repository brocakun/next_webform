import*as e from"react";import{useState as r,useEffect as t,useContext as n,createElement as i,useRef as o}from"react";import a from"deepmerge";import l from"strtotime";import{jsx as s,jsxs as u,Fragment as c}from"react/jsx-runtime";import d from"classnames";function f(){return f=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},f.apply(this,arguments)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function m(e,r){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,r){return e.__proto__=r,e},m(e,r)}function b(e,r,t){return b=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct.bind():function(e,r,t){var n=[null];n.push.apply(n,r);var i=new(Function.bind.apply(e,n));return t&&m(i,t.prototype),i},b.apply(null,arguments)}function h(e){var r="function"==typeof Map?new Map:void 0;return h=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return b(e,arguments,p(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),m(t,e)},h(e)}function v(e,r){if(null==e)return{};var t,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r.indexOf(t=o[n])>=0||(i[t]=e[t]);return i}function y(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function _(e,r){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(t)return(t=t.call(e)).next.bind(t);if(Array.isArray(e)||(t=function(e,r){if(e){if("string"==typeof e)return y(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?y(e,r):void 0}}(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function g(e){for(var r=Object.keys(e).length,t=0,n=[],i=0,o=Object.keys(e);i<o.length;i++){var a=o[i];if("#"!==a.charAt(0)&&"type"!==a){var l=e[a];n.push({weight:Math.floor(1e3*(void 0!==l["#weight"]?l["#weight"]:0))+t/r,key:a}),t++}}return n.sort(function(e,r){return e.weight-r.weight}),n.map(function(e){return e.key})}var w=/*#__PURE__*/e.createContext(null),k=function(e){/*#__PURE__*/return s("div",{dangerouslySetInnerHTML:{__html:e}})},P=function e(r){return r?Object.keys(r).reduce(function(t,n){var i=n.split("][");if(i.length>1)if(t[i[0]]||(t[i[0]]={}),2===i.length)"_item_"===i[1]?t[i[0]]=k(r[n]):t[i[0]][i[1]]=k(r[n]);else if("items"===i[1]||"_item_"===i[1]){var o,a=[].concat(i.slice(2)).join("][");t[i[0]]=f({},t[i[0]],e(((o={})[a]=r[n],o)))}else{var l,s=[].concat(i.slice(1)).join("][");t[i[0]]=f({},t[i[0]],e(f({},t[i[0]],((l={})[s]=r[n],l))))}else t[n]=k(r[n]);return t},{}):null};function j(e){return e.split("][")}function x(e){return e.filter(function(e){return"items"!==e&&"_item_"!==e}).join("][")}function O(e,r,t){for(var n=j(r),i=e,o=0;o<n.length;o++){var a=n[o];if(n.length-1===o)i[a]=t;else if(!i[a]){var l=n[o+1];i[a]=S(l)&&Number(l)>=0?[]:{}}i=i[a]}return e}function C(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e}var S=function(e){return Number.isInteger(e)||String(Math.floor(Number(e)))===e},q=function(e){return"function"==typeof e};function T(e){return null!=e&&"function"==typeof e[Symbol.iterator]}var N=function(e){var t=r(!1),n=t[1];t[0]||(e(),n(!0))},D=function(e){var r={};return"string"==typeof e&&e.replace(/(?<=^|;)\s*([^:]+)\s*:\s*([^;]+)\s*/g,function(e,t,n){var i=t.replace(/-./g,function(e){return e[1].toUpperCase()});return r[i]=n}),r},E={accept:"accept",acceptcharset:"acceptCharset","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",alt:"alt",as:"as",async:"async",autocapitalize:"autoCapitalize",autocomplete:"autoComplete",autocorrect:"autoCorrect",autofocus:"autoFocus",autoplay:"autoPlay",autosave:"autoSave",capture:"capture",cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charSet",checked:"checked",children:"children",cite:"cite",class:"className",classid:"classID",classname:"className",cols:"cols",colspan:"colSpan",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",controlslist:"controlsList",coords:"coords",crossorigin:"crossOrigin",dangerouslysetinnerhtml:"dangerouslySetInnerHTML",data:"data",datetime:"dateTime",default:"default",defaultchecked:"defaultChecked",defaultvalue:"defaultValue",defer:"defer",dir:"dir",disabled:"disabled",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback",download:"download",draggable:"draggable",enctype:"encType",enterkeyhint:"enterKeyHint",for:"htmlFor",form:"form",formmethod:"formMethod",formaction:"formAction",formenctype:"formEncType",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang",htmlfor:"htmlFor",httpequiv:"httpEquiv","http-equiv":"httpEquiv",icon:"icon",id:"id",imagesizes:"imageSizes",imagesrcset:"imageSrcSet",innerhtml:"innerHTML",inputmode:"inputMode",integrity:"integrity",is:"is",itemid:"itemID",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",keyparams:"keyParams",keytype:"keyType",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",low:"low",manifest:"manifest",marginwidth:"marginWidth",marginheight:"marginHeight",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",nomodule:"noModule",nonce:"nonce",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",placeholder:"placeholder",playsinline:"playsInline",poster:"poster",preload:"preload",profile:"profile",radiogroup:"radioGroup",readonly:"readOnly",referrerpolicy:"referrerPolicy",rel:"rel",required:"required",reversed:"reversed",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",start:"start",step:"step",style:"style",summary:"summary",tabindex:"tabIndex",target:"target",title:"title",type:"type",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap"},A=function(e){return e.match(/\[(\d.*?)\]/g).pop()},V=function(r,t){return r||("string"==typeof t||/*#__PURE__*/e.isValidElement(t)?t:void 0)},F=function(e,r,t){var n=e.slice();return r.forEach(function(r,i){void 0===n[i]?n[i]=t.cloneUnlessOtherwiseSpecified(r,t):t.isMergeableObject(r)?n[i]=a(e[i],r,t):-1===e.indexOf(r)&&n.push(r)}),n};function R(e,r){var t=g(r);if(t.length)for(var n,i=_(t);!(n=i()).done;){var o=n.value,a=r[o]["#id"],l=r[o]["#name"];if("]"===a.charAt(a.length-1)){var s=a.replace(/\[(.+?)\]/g,"["+e+"]"),u=l.replace(/\[(.+?)\]/g,"["+e+"]");r[o]["#id"]=s,r[o]["#name"]=u}else r[o]["#id"]=r[o]["#id"]+"["+e+"]",r[o]["#name"]=r[o]["#name"]+"["+e+"]";R(e,r[o])}}function M(e,r){return e.split(".").reduce(function(e,r){return e?e[r]:null},r||self)}var I=function(e,r){if(r["#date_date_min"]){var t=U(r["#date_date_min"]);if(l(e)<l(t))return"Date must be on or after "+t+"."}if(r["#date_date_max"]){var n=U(r["#date_date_max"]);if(l(e)>l(n))return"Date must be on or before "+n+"."}},U=function(e){return"today"===e?(new Date).toISOString().substring(0,10):"number"==typeof l(e)?new Date(e).toISOString().split("T")[0]:l(e).toISOString().substring(0,10)},z=function(e){var r=e.id,t=e.sid,n=e.data,i=e.setData,o=e.setStatus,a=e.setErrors,l=e.apiUrl;try{var s=f({},n,{webform_id:r,submission_id:t});return Promise.resolve(fetch(l,{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}})).then(function(e){var r=function(){if(!e.ok)return o("error"),Promise.resolve(e.json()).then(function(e){a(P(e.message.error))});o("success"),i({}),a({})}();if(r&&r.then)return r.then(function(){})})}catch(e){return Promise.reject(e)}},W=function(e,r,t,n){try{var i=t.buildUrl("/webform/"+e+"?_format=json"),o=t.buildUrl("/webform_rest/"+e+"/elements?_format=json"),a=t.buildUrl("/webform_rest/"+e+"/submission/"+r+"?_format=json");return Promise.resolve(Promise.all([t.fetch(i.toString(),f({},n,{headers:{"Content-Type":"application/json"}})),t.fetch(o.toString(),f({},n,{headers:{"Content-Type":"application/json"}})),t.fetch(a.toString(),f({},n,{headers:{"Content-Type":"application/json"}}))])).then(function(t){var n=t[0],i=t[1],o=t[2];function a(t){function a(t){function a(t){return Promise.resolve(i.json()).then(function(t){var i=J(t);return Promise.resolve(o.json()).then(function(t){for(var o=0,a=Object.entries(t.data);o<a.length;o++){var l=a[o];G(i,l[0],l[1])}return Promise.resolve(n.json()).then(function(t){return{id:e,sid:r,title:t.title,description:t.description,status:t.status,confirmation:{type:t.settings.confirmation_type,url:t.settings.confirmation_url,message:t.settings.confirmation_message},elements:i}})})})}var l=function(){if(!o.ok)return Promise.resolve(o.json()).then(function(e){throw new Error(e)})}();return l&&l.then?l.then(a):a()}var l=function(){if(!i.ok)return Promise.resolve(i.json()).then(function(e){throw new Error(e)})}();return l&&l.then?l.then(a):a()}var l=function(){if(!n.ok)return Promise.resolve(n.json()).then(function(e){throw new Error(e)})}();return l&&l.then?l.then(a):a()})}catch(e){return Promise.reject(e)}},L=function(e,r,t){try{var n=r.buildUrl("/webform/"+e+"?_format=json"),i=r.buildUrl("/webform_rest/"+e+"/elements?_format=json");return Promise.resolve(Promise.all([r.fetch(n.toString(),f({},t,{headers:{"Content-Type":"application/json"}})),r.fetch(i.toString(),f({},t,{headers:{"Content-Type":"application/json"}}))])).then(function(r){var t=r[0],n=r[1];function i(r){function i(r){return Promise.resolve(n.json()).then(function(r){var n=J(r);return Promise.resolve(t.json()).then(function(r){return{id:e,sid:e,title:r.title,description:r.description,status:r.status,confirmation:{type:r.settings.confirmation_type,url:r.settings.confirmation_url,message:r.settings.confirmation_message},elements:n}})})}var o=function(){if(!n.ok)return Promise.resolve(n.json()).then(function(e){throw new Error(e)})}();return o&&o.then?o.then(i):i()}var o=function(){if(!t.ok)return Promise.resolve(t.json()).then(function(e){throw new Error(e)})}();return o&&o.then?o.then(i):i()})}catch(e){return Promise.reject(e)}},H=["#process","#groups","#after_build","#pre_render","#value_callback","#theme_wrappers","#allowed_tags","#attached","#element_validate","#cache","#prefix","#suffix","#webform_children","#webform_parents","#array_parents","#autocomplete_route_parameters","#autocomplete_route_name","#ajax","#ajax_processed","#ajax_prefix","#ajax_suffix","#child_keys","#ajax_attributes","#tabledrag","#sorted","#processed","#after_build_done","#tree"],J=function e(r){return H.forEach(function(e){delete r[e]}),g(r).forEach(function(t){r[t]=e(r[t])}),r},G=function e(r,t,n){if("object"==typeof r&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(i===t&&(r[i]["#default_value"]=n),"object"==typeof r[i]&&null!==r[i]&&e(r[i],t,n))},B=function(e){return function(r){return t(function(){r.value||!r.element["#default_value"]||r.element["#default_value"].headers||r.setValue(r.element["#default_value"])},[]),/*#__PURE__*/s(e,f({},r))}},K=function(e){var r=["id","data-drupal-selector","webform-remove-for-attribute"];return Object.keys(e).filter(function(e){return!r.includes(e)}).reduce(function(r,t){return"class"===t?r.className=d(e[t]):E[t]?r[E[t]]=e[t]:r[t]=e[t],r},{})},X=function(e){return function(r){var t,n,i,o,a,l,u=f({},K(null!=(t=r.element["#attributes"])?t:{}),null!=(n=r.fieldProps)?n:{});u.style&&(u.style=D(u.style));var c=f({},K(null!=(i=r.element["#label_attributes"])?i:{}),null!=(o=r.labelProps)?o:{});c.style&&(c.style=D(c.style));var d=f({},K(null!=(a=r.element["#wrapper_attributes"])?a:{}),null!=(l=r.wrapperProps)?l:{});return d.style&&(d.style=D(d.style)),/*#__PURE__*/s(e,f({},r,{fieldProps:u,labelProps:c,wrapperProps:d}))}};function $(e){var r=e.match(/\[name=["|']([A-z][A-z\d-_.:]*)["|']\]$/);return r&&r[1]}function Y(e,r){if(C(e[Object.keys(e)[0]]))switch(Object.keys(e[Object.keys(e)[0]])[0]){case"pattern":return"string"==typeof r&&new RegExp(e.value.pattern).test(r);case"!pattern":return"string"==typeof r&&!new RegExp(e.value.pattern).test(r);case"less":return r<e.value.less;case"less_equal":return r<=e.value.less_equal;case"greater":return r>e.value.greater;case"greater_equal":return r>=e.value.greater_equal;case"between":case"!between":var t=e.value.between,n=t.substring(0,t.indexOf(":")),i=t.substring(t.indexOf(":"),t.length-1);return"between"==Object.keys(e)[0]?r>=n&&r<=i:r<n||r>i}else switch(e&&Object.keys(e)[0]){case"empty":return!r;case"filled":return!!r;case"checked":return 1==r;case"unchecked":return 0==r;case"value":return r==e.value;case"!value":return r!=e.value}}var Q=function(e){switch(e){case"invisible":case"invisible-slide":case"!visible":return{"#access":!1};case"visible":case"visible-slide":case"!invisible":return{"#access":!0};case"enabled":case"!disabled":return{"#disabled":!1};case"disabled":case"!enabled":return{"#disabled":!0};case"required":case"!optional":return{"#required":!0};case"optional":case"!required":return{"#required":!1};case"checked":case"!unchecked":return{"#checked":!0};case"unchecked":case"!checked":return{"#unchecked":!0};case"readonly":case"!readwrite":return{"#readonly":!0};case"readwrite":case"!readonly":return{"#readonly":!1}}},Z=function(e,r){var t=function(e,r){var t,n={},i={},o={};if(e&&!Object.keys(e).includes("headers")){t=e;for(var a=0,l=Object.keys(t);a<l.length;a++){var s=l[a];n[s]={},i[s]={},o[s]={};for(var u=0,c=Object.keys(t[s]);u<c.length;u++){var d=c[u];if(isNaN(Number(d))){var f,p=$(d);if(Object.prototype.hasOwnProperty.call(r,p)&&"string"!=typeof r[p]&&"boolean"!=typeof r[p]){console.warn('Unexpected type "'+typeof r[p]+'" for element "'+p+'"');continue}n[s][p]=Y(t[s][d],null!=(f=r[p])?f:void 0)}else if("or"!==t[s][d]&&"xor"!==t[s][d]){var m,b=$(Object.keys(t[s][d])[0]),h=Object.values(t[s][d])[0];if(Object.prototype.hasOwnProperty.call(r,b)&&"string"!=typeof r[b]&&"boolean"!=typeof r[b]){console.warn('Unexpected type "'+typeof r[b]+'" for element "'+b+'"');continue}if(Object.values(t[s]).includes("or"))i[s][b]=Y(h,null!=(m=r[b])?m:void 0);else if(Object.values(t[s]).includes("xor")){var v;o[s][b]=Y(h,null!=(v=r[b])?v:void 0)}}}}}return{allConditionsForTrue:n,anyConditionForTrue:i,oneConditionForTrue:o,webformStates:t}}(e,r),n=t.allConditionsForTrue,i=t.anyConditionForTrue,o=t.oneConditionForTrue,a=t.webformStates;if(a&&0!==Object.keys(a).length&&Object.keys(a)[0].length){for(var l={},s=0,u=Object.keys(a);s<u.length;s++){var c=u[s];Object.keys(n[c]).length&&Object.values(n[c]).every(function(e){return!0===e})||Object.keys(i[c]).length&&Object.values(i[c]).includes(!0)||Object.keys(o[c]).length&&1==Object.values(o[c]).filter(function(e){return 1==e}).length?Object.assign(l,Q(c)):Object.assign(l,Q("!"+c))}return l}},ee=function(e){return function(i){var o=r({}),a=o[0],l=o[1],u=n(w).data,c=i.element,d=c.add?c["#_webform_states"]:c["#states"],p=function(e){if(!e||Object.keys(e).includes("headers"))return[];for(var r=[],t=0,n=Object.keys(e);t<n.length;t++)for(var i=n[t],o=0,a=Object.keys(e[i]);o<a.length;o++){var l=a[o];if(isNaN(Number(l))){var s=$(l);r.push(s)}else if("or"!==e[i][l]&&"xor"!==e[i][l]){var u=$(Object.keys(e[i][l])[0]);r.push(u)}}return r}(d);return t(function(){l(Z(d,u))},[]),t(function(){l(Z(d,u))},p.map(function(e){return u[e]})),/*#__PURE__*/s(e,f({},i,{element:f({},c,a)}))}},re=["children","label","labelProps","labelFor","isRequired","description","descriptionDisplay","descriptionProps","labelDisplay","error","access"],te=function(e){var r=e.children,t=e.label,n=e.labelProps,i=void 0===n?{}:n,o=e.labelFor,a=e.isRequired,l=e.description,c=e.descriptionDisplay,p=e.descriptionProps,m=void 0===p?{}:p,b=e.labelDisplay,h=void 0===b?"before":b,y=e.error,_=e.access,g=v(e,re),w=d(i.className,{"required-field":a,"visually-hidden":"invisible"===h}),k=d(m.className,{"visually-hidden":"invisible"===c}),P=/*#__PURE__*/s("label",f({},i,{className:w,htmlFor:o,children:t}));return _?/*#__PURE__*/u("div",f({},g,{children:[/*#__PURE__*/s("style",{suppressHydrationWarning:!0,children:"\n.required-field:after {\n  content: ' *';\n  color: red;\n}\n.invalid-feedback {\n  color: red;\n}\n.visually-hidden {\n  position: absolute !important;\n  clip: rect(1px, 1px, 1px, 1px);\n  overflow: hidden;\n  height: 1px;\n  width: 1px;\n  word-wrap: normal;\n}\n        "}),!["after","none"].includes(h)&&P,"before"===c&&l&&/*#__PURE__*/s("div",f({},m,{children:l})),r,("after"===c||"invisible"===c)&&l&&/*#__PURE__*/s("div",f({},m,{className:k,children:l})),"after"===h&&P,y&&/*#__PURE__*/s("div",{className:"invalid-feedback",children:y})]})):null},ne=["children","label","labelProps","labelDisplay","labelFor","description","descriptionDisplay","descriptionProps","isRequired","error","access"],ie=function(e){var r=e.children,t=e.label,n=e.labelProps,i=void 0===n?{}:n,o=e.description,a=e.descriptionDisplay,l=e.descriptionProps,c=void 0===l?{}:l,p=e.isRequired,m=e.error,b=e.access,h=v(e,ne),y=d(i.className,{"required-field":p}),_=d(c.className,{"visually-hidden":"invisible"===a}),g=/*#__PURE__*/s("legend",f({},i,{className:y,children:t}));return b?/*#__PURE__*/u("fieldset",f({},h,{children:[/*#__PURE__*/s("style",{suppressHydrationWarning:!0,children:"\n.required-field:after {\n  content: ' *';\n  color: red;\n}\n.invalid-feedback {\n  color: red;\n}\n.visually-hidden {\n  position: absolute !important;\n  clip: rect(1px, 1px, 1px, 1px);\n  overflow: hidden;\n  height: 1px;\n  width: 1px;\n  word-wrap: normal;\n}\n        "}),g,"before"===a&&o&&/*#__PURE__*/s("div",f({},c,{className:_,children:o})),r,("after"===a||"invisible"===a)&&o&&/*#__PURE__*/s("div",f({},c,{className:_,children:o})),m&&/*#__PURE__*/s("div",{className:"invalid-feedback",children:m})]})):null},oe=function(r,t){return void 0===t&&(t={}),function(n){var i=n.element,o=n.error,a=f({defaultWrapperType:"form_element",displayErrors:!0,labelFor:function(e){return e["#id"]},labelProps:{},wrapperProps:{}},"function"==typeof t?t(i):t),l=a.labelFor,u=a.displayErrors,c=i["#wrapper_type"]?i["#wrapper_type"]:a.defaultWrapperType,d="form_element"===c&&i["#title"]?i["#title_display"]:"none",p="string"==typeof o||/*#__PURE__*/e.isValidElement(o),m="fieldset"!==c?te:ie,b=f({},n.labelProps,a.labelProps),h=f({},n.wrapperProps,a.wrapperProps);/*#__PURE__*/return s(m,f({label:i["#title"],isRequired:i["#required"],access:i["#access"],labelDisplay:d,error:u&&p?o:void 0,labelProps:b,description:i["#description"]?/*#__PURE__*/s("div",{dangerouslySetInnerHTML:{__html:i["#description"]["#markup"]}}):void 0,descriptionDisplay:i["#description_display"]},h,{labelFor:"none"!==d?function(){if("function"==typeof l)return l(i)}():void 0,children:/*#__PURE__*/s(r,f({},n))}))}},ae=ee(B(X(oe(function(e){var i=e.element,o=e.setValue,a=e.value,l=void 0===a?"":a,d=e.fieldProps,p=r({}),m=p[0],b=p[1],h=r(null),v=h[0],y=h[1],_=n(w);return t(function(){Array.isArray(i["#autocomplete_items"])?b(i["#autocomplete_items"].reduce(function(e,r){return e[r]=r,e},{})):"string"==typeof i["#autocomplete_items"]?function(){try{return Promise.resolve(fetch(_.apiUrl+"?op=autocomplete_options&id="+_.id+"&options_id="+i["#autocomplete_items"])).then(function(e){function r(r){return Promise.resolve(e.json()).then(function(e){b(e)})}var t=function(){if(!e.ok)return Promise.resolve(e.json()).then(function(e){throw Error(e.message.message)})}();return t&&t.then?t.then(r):r()})}catch(e){return Promise.reject(e)}}():console.warn("Unsupported autocomplete type on element "+i["#name"]+".")},[i["#autocomplete_items"]]),t(function(){y(l)},[l]),/*#__PURE__*/u(c,{children:[/*#__PURE__*/s("input",f({type:"text",name:i["#webform_key"],onChange:function(e){return function(e){try{return o(m[e.target.value]?e.target.value:""),y(e.target.value),Promise.resolve()}catch(e){return Promise.reject(e)}}(e)},disabled:i["#disabled"],hidden:!i["#access"],required:i["#required"],readOnly:i["#readonly"],value:null!=v?v:l},d,{id:""+i["#id"],list:i["#webform_key"]+"-datalist"})),/*#__PURE__*/s("datalist",{id:i["#webform_key"]+"-datalist",children:Object.keys(m).map(function(e,r){/*#__PURE__*/return s("option",{value:e,children:m[e]},r)})})]})})))),le={number:"number",hidden:"hidden",email:"email",search:"search",tel:"tel",url:"url",textfield:"text"},se=ee(B(X(oe(function(e){var r,t=e.element,n=e.value,i=void 0===n?"":n,o=e.setValue,a=e.fieldProps;return t["#type"]in le||console.warn(t["#type"]+" which was used on "+t["#webform_key"]+" is not supported by WebformText."),/*#__PURE__*/s(c,{children:/*#__PURE__*/s("input",f({type:null!=(r=le[t["#type"]])?r:t["#type"],name:t["#name"],value:i,onChange:function(e){return function(e){try{return o(e.target.value),Promise.resolve()}catch(e){return Promise.reject(e)}}(e)},disabled:t["#disabled"],hidden:!t["#access"],required:t["#required"],readOnly:t["#readonly"],placeholder:t["#placeholder"]},a,{id:t["#id"]}))})})))),ue=ee(B(X(oe(function(e){var t=e.element,n=e.setValue,i=e.value,o=void 0===i?"":i,a=e.fieldProps,l=r(!1),d=l[0],p=l[1],m="webform_select_other"===t["#type"]?function(){for(var e={},r=0,n=Object.keys(t);r<n.length;r++){var i=n[r];"select"==i&&(e=t[i])}return e}():null;/*#__PURE__*/return u(c,{children:[/*#__PURE__*/u("select",f({name:t["#name"],onChange:function(e){return function(e){try{return"Other"==e.target.value?p(!d):d?(p(!d),n(e.target.value)):n(e.target.value),Promise.resolve()}catch(e){return Promise.reject(e)}}(e)},value:o,disabled:t["#disabled"],hidden:!t["#access"],required:t["#required"]},a,{id:t["#id"],children:["select"==t["#webform_plugin_id"]||void 0===t["#webform_plugin_id"]&&"webform_select_other"!==t["#type"]?function(e){for(var r,t=[],n=0,i=Object.keys(e);n<i.length;n++){var o=i[n];o.length?t.push(e[o]):r=e[o]}return t.unshift(r),t}(t["#options"]).map(function(e,r){/*#__PURE__*/return s("option",{value:e,children:e},r)}):null,"webform_entity_select"==t["#webform_plugin_id"]?Object.keys(t["#options"]).map(function(e){/*#__PURE__*/return s("option",{value:e,children:t["#options"][e]},e)}):null,"webform_select_other"===t["#type"]&&m["#options"]?/*#__PURE__*/u(c,{children:[Object.values(m["#options"]).map(function(e,r){if("Other…"!=e)/*#__PURE__*/return s("option",{value:e.toString(),children:e},r)}),/*#__PURE__*/s("option",{value:"Other",children:"Other..."})]}):null]})),d?/*#__PURE__*/s("input",{type:"text",id:t["#webform_key"],name:t["#webform_key"],onInput:function(e){return function(e){try{return n(e.target.value),Promise.resolve()}catch(e){return Promise.reject(e)}}(e)},value:o}):null]})})))),ce=ee(B(X(oe(function(e){var r=e.element,t=e.value,n=e.setValue;/*#__PURE__*/return s(c,{children:/*#__PURE__*/s("textarea",f({name:r["#webform_key"],value:void 0===t?"":t,onChange:function(e){return function(e){try{return n(e.target.value),Promise.resolve()}catch(e){return Promise.reject(e)}}(e)},disabled:r["#disabled"],hidden:!r["#access"],required:r["#required"],readOnly:r["#readonly"],placeholder:r["#placeholder"]},e.fieldProps,{id:r["#id"]}))})})))),de=function(e){/*#__PURE__*/return u("code",{children:[e.error,/*#__PURE__*/s("pre",{children:JSON.stringify(e.element,null,2)})]})},fe=function(e){var r=n(w).registry,t=e.element,i=e.error;if(r.getComponent(t["#type"])){var o=r.getComponent(t["#type"]);/*#__PURE__*/return s(o,f({},e))}/*#__PURE__*/return s(de,{element:t,error:i})},pe=ee(X(oe(function(e){var r=e.element,n=e.value,i=e.setValue,o=e.error,a=e.tableProps,l=void 0===a?{}:a,d=e.trProps,p=void 0===d?{}:d,m=e.tdProps,b=void 0===m?{}:m,h=Array.isArray(n)?n:[],v="webform_custom_composite"===r["#type"],y=function(e,t,n){void 0===n&&(n=null);var a=[].concat(r["#parents"],["items",e,"_item_"]),l=f({},t,r.items[e]?{"#access":r["#access"],"#states":r["#_webform_states"],"#parents":a}:{"#default_value":void 0,"#access":r["#access"],"#states":r["#_webform_states"],"#parents":a});/*#__PURE__*/return s(fe,{element:l,setValue:function(r){var t=Array.from(h);n?t[e][n]=r:t[e]=r,i(t)},value:n?h[e][n]:h[e],error:o?o[e]:null},l["#id"])},_=function(e){var t=g(r["#element"]),n=r.items[e]?e:0;if(Array.isArray(t)&&t.length)return t.map(function(t){var i=M(r.items[n]._item_?"items."+n+"._item_."+t:"items."+n+"."+t,r),o=f({},i,{"#webform_key":t,"#id":i["#id"]+"["+e+"]"}),a=JSON.parse(JSON.stringify(o));return R(e,a),y(e,a,t)});var i=f({},r.items[n]._item_,{"#webform_key":r.items[n]._item_["#webform_key"]+"["+e+"]","#id":r.items[n]._item_["#webform_key"]+"["+e+"]"});return y(e,i)},w=r["#cardinality"],k=h.length;t(function(){0===k&&(r["#default_value"]&&Array.isArray(r["#default_value"])?i(r["#default_value"]):i([""]))},[]);for(var P=[],j=function(e){var t=f({},r.items[0]._operations_.remove,{"#type":"button","#value":"Remove","#attributes":{class:["webform-button--remove"]}});P.push(/*#__PURE__*/u("tr",f({},p,{children:[/*#__PURE__*/s("td",f({},b,{children:_(e)})),/*#__PURE__*/s("td",f({},b,{children:/*#__PURE__*/s(fe,{element:t,fieldProps:{onClick:function(r){r.preventDefault(),function(e){if(!T(n))throw new TypeError('"'+typeof n+'" is not iterable');var r=[].concat(n);r.splice(e,1),i(r)}(e)},id:r["#webform_key"]+"-remove-btn-"+e}})}))]}),e))},x=0;x<k;x++)j(x);/*#__PURE__*/return u(c,{children:[/*#__PURE__*/s("table",f({style:{width:"100%"}},l,{children:/*#__PURE__*/s("tbody",{children:P})})),(k<w||!w)&&/*#__PURE__*/s("div",{children:/*#__PURE__*/s(fe,{element:f({},r.add.submit,{"#type":"button","#attributes":{class:["webform-button--add"]}}),fieldProps:{onClick:function(e){e.preventDefault(),h.push(v?{}:""),i(h)},id:r["#webform_key"]+"-add-btn"}})})]})},{labelFor:!1}))),me=B(oe(function(e){var r=e.element,t=e.error,n=e.value,i=e.setValue,o=g(r);/*#__PURE__*/return s(c,{children:o.map(function(e){/*#__PURE__*/return s(fe,{element:f({"#webform_key":r["#webform_key"],"#states":r["#states"]},r[e],{"#id":r["#webform_multiple"]?""+r[e]["#id"]+A(r["#webform_key"]):r[e]["#id"]}),value:n&&n[e]?n[e]:"",setValue:function(r){var t;i(f({},n,((t={})[e]=r,t)))},error:t?t[e]:null},e)})})},{displayErrors:!1,defaultWrapperType:"fieldset"})),be=ee(X(oe(function(e){var r=e.element,t=e.fieldProps,i=n(w),o=i.data,a=i.setData,l=i.errors,u=g(r).map(function(e){var t=r["#states"]?f({},r[e]["#states"],r["#states"]):null;/*#__PURE__*/return s(fe,{element:t?f({},r[e],{"#states":t}):r[e],error:l[r[e]["#webform_key"]],value:o[r[e]["#webform_key"]],setValue:function(t){a(function(n){var i;return f({},n,((i={})[r[e]["#webform_key"]]=t,i))})}},r[e]["#webform_key"])});/*#__PURE__*/return s(c,{children:/*#__PURE__*/s("div",f({},t,{children:u}))})},{defaultWrapperType:"container"}))),he=ee(oe(function(e){var r=e.element,t=e.itemProps,o=void 0===t?{}:t,a=n(w),l=a.data,u=a.setData,d=a.errors,p=f({style:{flexGrow:1}},o),m=g(r).map(function(e){var t=r["#states"]?f({},r[e]["#states"],r["#states"]):null;/*#__PURE__*/return i("div",f({},p,{key:r[e]["#webform_key"]}),/*#__PURE__*/s("div",{children:/*#__PURE__*/s(fe,{element:t?f({},r[e],{"#states":t}):r[e],error:d[r[e]["#webform_key"]],value:l[r[e]["#webform_key"]],setValue:function(t){u(function(n){var i;return f({},n,((i={})[r[e]["#webform_key"]]=t,i))})}})},r[e]["#webform_key"]))});/*#__PURE__*/return s(c,{children:m})},function(e){var r,t;return{wrapperProps:f({},K(null!=(r=e["#attributes"])?r:{}),{style:{display:"flex",boxSizing:"border-box",gap:"1rem",justifyContent:null!=(t=e["#align_items"])?t:"flex-start"}})}})),ve=ee(oe(function(e){var r=e.element,t=n(w),i=t.data,o=t.setData,a=t.errors,l=g(r).map(function(e){var t=r["#states"]?f({},r[e]["#states"],r["#states"]):null;/*#__PURE__*/return s(fe,{element:t?f({},r[e],{"#states":t}):r[e],error:a[r[e]["#webform_key"]],value:i[r[e]["#webform_key"]],setValue:function(t){o(function(n){var i;return f({},n,((i={})[r[e]["#webform_key"]]=t,i))})}},r[e]["#webform_key"])});/*#__PURE__*/return s(c,{children:l})},{defaultWrapperType:"fieldset"})),ye=ee(X(function(e){var r=e.element,t=e.error,i=e.labelProps,o=e.fieldProps,a=e.wrapperProps,l=void 0===a?{}:a,u=n(w),c=u.data,d=u.setData,p=u.errors,m=g(r).map(function(e){var t=r["#states"]?f({},r[e]["#states"],r["#states"]):null;/*#__PURE__*/return s(fe,{element:t?f({},r[e],{"#states":t}):r[e],error:p[r[e]["#webform_key"]],value:c[r[e]["#webform_key"]],setValue:function(t){d(function(n){var i;return f({},n,((i={})[r[e]["#webform_key"]]=t,i))})}},r[e]["#webform_key"])});/*#__PURE__*/return s(te,f({label:r["#title"],isRequired:r["#required"],labelDisplay:r["#title_display"],access:r["#access"],settings:null,error:t,labelProps:i},l,{children:/*#__PURE__*/s("section",f({},o,{style:o.style,children:m}))}))})),_e=["data"],ge=ee(X(function(e){var r=e.element,t=e.error,n=e.wrapperProps,o=void 0===n?{}:n,a=e.fieldProps,l=void 0===a?{}:a,c=e.theadProps,d=void 0===c?{}:c,p=e.tbodyProps,m=void 0===p?{}:p,b=e.trProps,h=void 0===b?{}:b,y=e.tdProps,_=void 0===y?{}:y,w=e.labelProps,k=g(r).map(function(e){return"webform_table_row"!==r[e]["#type"]?/*#__PURE__*/s("tr",{children:/*#__PURE__*/s("td",{children:/*#__PURE__*/u("div",{children:["The form element ",/*#__PURE__*/s("em",{children:e})," is not inside a table row. To render the form element, it must be placed inside a table row."]})})},e):/*#__PURE__*/s(fe,{element:f({},r[e],{"#states":r["#states"]}),fieldProps:h,tdProps:_},e)}),P=r["#header"];/*#__PURE__*/return s(te,f({label:r["#title"],isRequired:r["#required"],labelDisplay:r["#title_display"],access:r["#access"],settings:null,error:t,labelProps:w},o,{children:/*#__PURE__*/u("table",f({},l,{children:[/*#__PURE__*/s("thead",f({},d,{children:/*#__PURE__*/s("tr",f({},h,{children:P&&P.length?P.map(function(e,r){var t=e.data,n=v(e,_e);/*#__PURE__*/return i("th",f({},K(n),{key:r}),t["#markup"])}):null}))})),/*#__PURE__*/s("tbody",f({},m,{children:k}))]}))}))})),we=ee(B(X(oe(function(e){var r=e.element,t=e.value,n=void 0===t?0:t,i=e.setValue,o=e.fieldProps,a=/*#__PURE__*/s("output",{htmlFor:r["#id"],style:{below:{transform:"translateX("+n+"px)",display:"block",position:"absolute",padding:"2px 5px",textAlign:"center",border:"1px solid #bbb",background:"#ededed"},above:{transform:"translateX("+n+"px)",display:"block",position:"absolute",padding:"2px 5px",textAlign:"center",border:"1px solid #bbb",background:"#ededed",bottom:"22px"},left:{marginRight:"5px"},right:{marginLeft:"5px"}}[r["#output"]],name:"result",children:n});/*#__PURE__*/return u("div",{className:"form-type-range",style:{display:"block",position:"relative"},children:[r["#output"]&&"left"===r["#output"]?a:null,/*#__PURE__*/s("input",f({type:r["#type"],name:r["#webform_key"],min:r["#min"]?r["#min"]:null,max:r["#max"]?r["#max"]:null,onChange:function(e){return function(e){try{return i(e.target.value),Promise.resolve()}catch(e){return Promise.reject(e)}}(e)},disabled:r["#disabled"],hidden:!r["#access"],required:r["#required"],readOnly:r["#readonly"]},o,{id:r["#id"],value:n})),r["#output"]&&"left"!==r["#output"]?a:null]})})))),ke=ee(B(X(oe(function(e){var n=e.element,i=e.setValue,o=e.fieldProps,a=e.value;"checkbox"!==n["#type"]&&"radio"!==n["#type"]&&console.warn(n["#type"]+" which was used on "+n["#webform_key"]+" is not supported by WebformCheckbox.");var l=r(null!=a?a:!!n["#checked"]&&n["#checked"]),u=l[0],d=l[1];return t(function(){"boolean"==typeof a&&d(a)},[a]),/*#__PURE__*/s(c,{children:/*#__PURE__*/s("div",{children:/*#__PURE__*/s("input",f({type:n["#type"],name:n["#name"],onChange:function(e){return function(e){try{return i(e.target.checked),Promise.resolve()}catch(e){return Promise.reject(e)}}(e)},disabled:n["#disabled"],hidden:!(!n["#access"]||n["#access"]),required:n["#required"],readOnly:n["#readonly"],checked:u,id:n["#id"]},o,{value:n["#return_value"]}))})})},{wrapperProps:{style:{display:"flex"}}})))),Pe=ee(B(oe(function(e){var t=e.element,n=e.value,i=void 0===n?0:n,o=e.setValue,a=e.fieldProps,l=r(0),d=l[0],p=l[1],m=t["#max"]?t["#max"]:5;/*#__PURE__*/return s(c,{children:/*#__PURE__*/u("div",{className:"star-rating",children:[/*#__PURE__*/s("input",f({defaultValue:i,name:t["#webform_key"],hidden:!0,type:"range"},a,{id:t["#webform_key"]})),/*#__PURE__*/s("style",{suppressHydrationWarning:!0,children:"\nbutton {\n  backgroundColor: 'transparent',\n  border: 'none',\n  outline: 'none',\n  cursor: 'pointer',\n}\n.on {\n  color: rgb(14 165 233);\n  }\n.off {\ncolor: #ccc;\n}\n.star-rating {\nfont-size: 2rem;\n}\n}"}),Array(m).fill(0).map(function(e,r){/*#__PURE__*/return s("button",{type:"button",className:(r+=1)<=(d||i)?"on":"off",onClick:function(){return o(r)},onMouseEnter:function(){return p(r)},onMouseLeave:function(){return p(i)},disabled:t["#disabled"],hidden:!t["#access"],children:/*#__PURE__*/s("span",{className:"star",children:"★"})},r)})]})})}))),je=ee(B(X(function(i){var o=i.element,a=i.error,l=i.setValue,u=i.labelProps,c=i.value,d=i.fieldProps,p=i.wrapperProps,m=void 0===p?{}:p,b=n(w).registerField,h=r(""),v=h[0],y=h[1],_=r(""),k=_[0],P=_[1];e.useEffect(function(){o["#parents"]&&b(x(o["#parents"]),{validate:function(){if(v!==k)return"The specified email addresses do not match."}})}),t(function(){""!==c&&(y(c),P(c))},[c]),t(function(){l(v&&k?v!==k?"":v:"")},[v,k]);var j=g(o).map(function(e){/*#__PURE__*/return s(fe,{element:f({},o[e],{"#states":o["#states"]}),error:a?a[e]:null,value:"mail_1"===e?v:k,setValue:function(r){"mail_1"===e?y(r):"mail_2"===e&&P(r)},labelProps:u,fieldProps:d},e)});/*#__PURE__*/return s(te,f({isRequired:!1,labelDisplay:"none",error:a,access:o["#access"]},m,{children:j}))}))),xe=ee(function(e){var r=e.element,t=e.fieldProps,n=e.labelProps,i=e.wrapperProps;/*#__PURE__*/return s(te,f({label:r["#title"],isRequired:r["#required"],labelDisplay:r["#title_display"],access:r["#access"],settings:null,error:e.error,labelProps:void 0===n?{}:n},void 0===i?{}:i,{labelFor:r["#webform_key"],children:/*#__PURE__*/s("div",f({},void 0===t?{}:t,{id:r["#webform_key"],children:r["#value"]}))}))}),Oe=function(e){var r=function(r){e.onClose&&e.onClose(r)};return e.show?/*#__PURE__*/u("div",{className:"modal",id:"modal",onClick:r,children:[/*#__PURE__*/s("style",{suppressHydrationWarning:!0,children:'\n.modal {\n    width: 500px;\n    background: white;\n    border: 1px solid #ccc;\n    transition: 1.1s ease-out;\n    box-shadow: -2rem 2rem 2rem rgba(0, 0, 0, 0.2);\n    filter: blur(0);\n    transform: translate(-50%, -5%);\n    visibility: visible;\n    position: absolute;\n    opacity: 1;\n    left: 50%;\n    z-index: 100;\n}\n.modal.off {\n    opacity: 0;\n    visibility: hidden;\n    filter: blur(8px);\n    transform: scale(0.33);\n    box-shadow: 1rem 0 0 rgba(0, 0, 0, 0.2);\n}\n@supports (offset-rotation: 0deg) {\n    offset-rotation: 0deg;\n    offset-path: path("M 250,100 S -300,500 -700,-200");\n    .modal.off {\n        offset-distance: 100%;\n    }\n}\n@media (prefers-reduced-motion) {\n    .modal {\n        offset-path: none;\n    }\n}\n.modal h2 {\n    border-bottom: 1px solid #ccc;\n    padding: 1rem;\n    margin: 0;\n}\n.modal .content {\n    padding: 1rem;\n}\n.modal .actions {\n    border-top: 1px solid #ccc;\n    background: #eee;\n    padding: 0.5rem 1rem;\n}\n#centered-toggle-button {\n    position: absolute;\n}\n\n'}),/*#__PURE__*/s("div",{className:"content",children:e.children}),/*#__PURE__*/s("div",{className:"actions",children:/*#__PURE__*/s("button",{className:"toggle-button",onClick:r,children:"Close"})})]}):null},Ce=ee(B(X(oe(function(e){var t=e.element,n=e.setValue,i=e.fieldProps,o=e.labelProps,a=r(!1),l=a[0],d=a[1],p=r(!!t["#checked"]&&t["#checked"]),m=p[0],b=p[1],h=r(!t["#access"]||t["#access"]);/*#__PURE__*/return s(c,{children:/*#__PURE__*/u("div",{children:[/*#__PURE__*/s("input",f({type:"checkbox",id:t["#id"],name:t["#webform_key"],onChange:function(e){return function(e){try{return b(!m),n(e.target.value?"1":"0"),Promise.resolve()}catch(e){return Promise.reject(e)}}(e)},disabled:t["#disabled"],hidden:!h[0],required:t["#required"],readOnly:t["#readonly"],checked:m},i)),/*#__PURE__*/s(Oe,{onClose:function(){return d(!1)},show:l,children:/*#__PURE__*/s("div",{dangerouslySetInnerHTML:{__html:t["#terms_content"]["#markup"]}})}),/*#__PURE__*/s("label",f({htmlFor:t["#id"]},o,{children:function(){var e=new RegExp(/(.*){(.*)}(.*)/);if(!e.test(t["#title"]))/*#__PURE__*/return s(c,{children:t["#title"]});var r=e.exec(t["#title"]);/*#__PURE__*/return u(c,{children:[r[1],/*#__PURE__*/s("a",{href:"#terms",role:"button",target:"_blank",className:"terms-link",onClick:function(e){e.preventDefault(),d(!l)},children:r[2]}),r[3]]})}()}))]})})},{labelProps:{style:{display:"none"}}})))),Se=ee(B(X(function(r){var t=r.element,i=r.setValue,o=r.value,a=r.error,l=r.fieldProps,u=r.labelProps,c=r.wrapperProps,d=void 0===c?{}:c,p=n(w).registerField,m=(null!=o?o:"").split("T"),b=m[0],h=void 0===b?"":b,v=m[1],y=void 0===v?"":v,_={date:h,time:y};e.useEffect(function(){t["#parents"]&&p(x(t["#parents"]),{validate:function(e){if(e){var r=new RegExp("^((19|20)\\d{2})-((0|1)\\d{1})-((0|1|2)\\d{1})T(2[0-3]|[01][0-9]):[0-5][0-9]"),t=new RegExp("^((19|20)\\d{2})-((0|1)\\d{1})-((0|1|2)\\d{1})T(2[0-3]|[01][0-9]):[0-5][0-9]:[0-5][0-9]");return r.test(e)||t.test(e)?void 0:"The value is invalid. Please fill out every field."}}})},[]);var k=g(t);/*#__PURE__*/return s(te,f({label:t["#title"],labelDisplay:t["#title_display"],access:t["#access"],isRequired:!1,error:a},d,{children:/*#__PURE__*/s("div",{id:t["#id"],children:k.map(function(e){/*#__PURE__*/return s(fe,{element:f({},t[e],{"#webform_key":t["#webform_key"],"#access":t[e]["#access"]?t[e]["#access"]:t["#access"],"#disabled":t["#disabled"],"#required":t["#required"],"#date_date_min":t["#date_date_min"],"#date_date_max":t["#date_date_max"],"#date_time_min":t["#date_time_min"],"#date_time_max":t["#date_time_max"],"#states":t["#states"]}),error:a?a[e]:null,setValue:function(r){i(("date"===e?r:h)+"T"+("time"===e?r:y))},labelProps:u,fieldProps:l,value:_[e]?_[e]:""},e)})})}))}))),qe=ee(B(X(oe(function(e){var r,t,n=e.element,i=e.setValue,o=e.value;/*#__PURE__*/return s(c,{children:/*#__PURE__*/s("input",f({type:"time",name:n["#name"],onChange:function(e){return function(e){try{return i(e.target.value),Promise.resolve()}catch(e){return Promise.reject(e)}}(e)},disabled:n["#disabled"],hidden:!n["#access"],required:n["#required"],readOnly:n["#readonly"],value:void 0===o?"":o},e.fieldProps,{id:n["#id"],min:null!=(r=n["#date_time_min"])?r:null,max:null!=(t=n["#date_time_max"])?t:null}))})})))),Te=ee(B(X(function(i){var o=i.element,a=i.error,l=i.setValue,u=i.fieldProps,c=i.labelProps,d=i.wrapperProps,p=void 0===d?{}:d,m=r({}),b=m[0],h=m[1],v=g(o),y=n(w).registerField;e.useEffect(function(){o["#parents"]&&y(x(o["#parents"]),{validate:function(e){if(e){var r=new RegExp("^((19|20)\\d{2})-((0|1)\\d{1})-((0|1|2)\\d{1})T(2[0-3]|[01][0-9]):[0-5][0-9]"),t=new RegExp("^((19|20)\\d{2})-((0|1)\\d{1})-((0|1|2)\\d{1})T(2[0-3]|[01][0-9]):[0-5][0-9]:[0-5][0-9]");return r.test(e)||t.test(e)?I(e,o):"The value is invalid. Please fill out every field."}}})},[]),t(function(){if(Object.keys(b)[0]&&Object.values(b).every(function(e){return null!==e})){var e,r,t=b.ampm&&"pm"===b.ampm;if(e=b.hour?t?b.hour+12:b.hour:t?12:"00",b.month){var n=o.month["#options"];r=Object.keys(n).find(function(e){return n[e]===b.month})}else r="1";var i=b.day?b.day:"1",a=b.year?b.year:(new Date).getFullYear(),s=e,u=b.minute?b.minute:"00",c=b.second?b.second:null;l(c?a+"-"+_(r)+"-"+_(i)+"T"+_(s)+":"+u+":"+c:a+"-"+_(r)+"-"+_(i)+"T"+_(s)+":"+u)}else Object.values(b).some(function(e){return null!==e})&&l(b)},[b]),t(function(){v.map(function(e){h(function(r){var t;return f({},r,((t={})[e]=null,t))})})},[]);var _=function(e){return e<=9?e="0"+e:e};/*#__PURE__*/return s(te,f({label:o["#title"],labelDisplay:o["#title_display"],access:o["#access"],isRequired:!1,error:a},p,{children:/*#__PURE__*/s("div",{id:o["#id"],children:v.map(function(e,r){/*#__PURE__*/return s(fe,{element:f({},o[e],{"#webform_key":o["#webform_key"],"#disabled":o["#disabled"],"#access":o["#access"],"#required":o["#required"],"#states":o["#states"]}),error:a?a[e]:null,setValue:function(r){var t;h(f({},b,((t={})[e]=r,t)))},labelProps:c,fieldProps:u,value:b[e]?b[e]:""},r)})})}))}))),Ne=ee(B(X(oe(function(r){var t=r.element,i=r.setValue,o=r.value,a=void 0===o?"":o,l=r.fieldProps,u=n(w).registerField;return e.useEffect(function(){t["#parents"]&&u(x(t["#parents"]),{validate:function(e){if(e)return I(e,t)}})},[]),/*#__PURE__*/s(c,{children:/*#__PURE__*/s("input",f({onChange:function(e){return function(e){try{return i(e.target.value),Promise.resolve()}catch(e){return Promise.reject(e)}}(e)},type:t["#type"],name:t["#name"],disabled:t["#disabled"],hidden:!t["#access"],required:t["#required"],readOnly:t["#readonly"],value:a},l,{id:t["#id"],min:t["#date_date_min"]?U(t["#date_date_min"]):null,max:t["#date_date_max"]?U(t["#date_date_max"]):null}))})})))),De=ee(B(function(e){var r=e.element;return!1===r["#access"]?null:/*#__PURE__*/s("div",{children:/*#__PURE__*/s("label",{children:r["#title"]})})})),Ee=ee(B(X(oe(function(e){var r=e.element,t=e.wrapperProps,i=[],o=n(w),a=o.setData,l={submit:function(){},reset:function(e){e.preventDefault(),a(function(){return{}})}},u=o.registry.getComponent("button");return Object.keys(l).forEach(function(e){r[e]&&i.push(/*#__PURE__*/s(u,{element:r[e],fieldProps:{type:"submit",onClick:l[e]}},e))}),/*#__PURE__*/s("div",f({},t,{children:i}))},{wrapperProps:{style:{display:"flex"}}})))),Ae={radios:"radio",checkboxes:"checkbox",webform_radios_other:"radio",webform_checkboxes_other:"checkbox",webform_entity_checkboxes:"checkbox",webform_entity_radios:"radio"},Ve=ee(X(oe(function(e){var n=e.element,i=e.value,o=void 0===i?[]:i,a=e.setValue,l=e.error,d=e.fieldProps;if(!(n["#type"]in Ae))throw new Error(n["#type"]+" which was used on "+n["#webform_key"]+" is not supported by WebformCheckboxRadioGroup.");var p=r(null),m=p[0],b=p[1],h=r(!1),v=h[0],y=h[1],w=Ae[n["#type"]],k="webform_checkboxes_other"===n["#type"]||"webform_radios_other"===n["#type"],P=k?n.other:null,j=function(){var e={},r={};if(k)for(var t=0,i=Object.keys(n);t<i.length;t++){var o=i[t];"radios"!==o&&"checkboxes"!==o||(e=n[o])}else e=n;for(var a=0,l=Object.keys(e["#options"]);a<l.length;a++){var s=l[a];"_other_"!==s&&(r[s]=e["#options"][s])}return r}();t(function(){if(n["#default_value"]&&!n["#default_value"].headers){a(n["#default_value"]);var e="string"==typeof n["#default_value"]?[n["#default_value"]]:n["#default_value"],r=e.filter(function(e){return Object.hasOwn(j,e)});if("checkbox"===w&&a(r),k&&Object.keys(e).length!==Object.keys(r).length)for(var t,i=_(e);!(t=i()).done;){var o=t.value;Object.hasOwn(j,o)||b(o)}}},[]),t(function(){m&&"checkbox"===w?a([].concat(Array.isArray(o)?o:[],[m])):m&&"radio"===w&&a(m)},[m]);var x=g(n).map(function(e){return"other"!==e&&"radios"!==e&&"checkboxes"!==e?/*#__PURE__*/s(fe,{element:f({},n[e],{"#webform_key":n["#webform_key"],"#states":n["#states"],"#access":n["#access"]}),fieldProps:d,setValue:function(r){if("checkboxes"===n["#type"]||"webform_entity_checkboxes"===n["#type"]){if(!0===r)a([].concat(Array.isArray(o)?o:[],[n[e]["#return_value"]]));else if(Array.isArray(o)&&o.length){var t=o.filter(function(r){return r!==n[e]["#return_value"]});a(t)}}else a(n[e]["#return_value"])},value:Array.isArray(o)&&o.includes(n[e]["#return_value"])||o===n[e]["#return_value"],error:l},e):"checkboxes"==e||"radios"==e?g(n[e]).map(function(r){/*#__PURE__*/return s(fe,{fieldProps:d,element:f({},n[e][r],{"#webform_key":n["#webform_key"],"#states":n["#states"],"#access":n["#access"]}),setValue:function(t){if("checkbox"===n[e][r]["#type"]){if("_other_"===n[e][r]["#return_value"])t?(b(null!=m?m:""),y(!0)):(y(!1),b(null));else if(!0===t)a([].concat(Array.isArray(o)?o:[],[n[e][r]["#return_value"]]));else if(Array.isArray(o)&&o.length){var i=o.filter(function(t){return t!==n[e][r]["#return_value"]});a(i)}}else"_other_"===n[e][r]["#return_value"]?(b(null!=m?m:""),a(null!=m?m:""),y(!0)):(y(!1),b(null),a(n[e][r]["#return_value"]))},value:Array.isArray(o)&&o.includes(n[e][r]["#return_value"])||o===n[e][r]["#return_value"]||"_other_"===n[e][r]["#return_value"]&&v,error:l},r)}):void 0});/*#__PURE__*/return u(c,{children:[x,k&&v?/*#__PURE__*/s(fe,{element:f({},n,{"#type":P["#type"],"#webform_key":n["#webform_key"],"#title":P["#title"],"#description":P["#description"],"#id":n["#id"]+"-other-input"}),value:m,setValue:function(e){b(e)}}):null]})},{defaultWrapperType:"fieldset",labelFor:!1}))),Fe=ee(B(X(oe(function(e){var r=e.element,t=e.fieldProps,n=e.labelProps,i=e.wrapperProps;/*#__PURE__*/return s(te,f({label:r["#title"],isRequired:r["#required"],labelDisplay:r["#title_display"],access:r["#access"],settings:null,error:e.error,labelProps:void 0===n?{}:n},void 0===i?{}:i,{labelFor:r["#webform_key"],children:/*#__PURE__*/s("div",f({},void 0===t?{}:t,{id:r["#webform_key"],dangerouslySetInnerHTML:{__html:r["#markup"]}}))}))},{wrapperProps:{style:{display:"flex"}}})))),Re=ee(B(X(oe(function(e){var r=e.element,t=e.fieldProps,n=e.labelProps,i=e.wrapperProps;/*#__PURE__*/return s(te,f({label:r["#title"],isRequired:r["#required"],labelDisplay:r["#title_display"],access:r["#access"],settings:null,error:e.error,labelProps:void 0===n?{}:n},void 0===i?{}:i,{labelFor:r["#webform_key"],children:/*#__PURE__*/s("div",f({},void 0===t?{}:t,{id:r["#webform_key"],dangerouslySetInnerHTML:{__html:r["#message_message"]["#markup"]}}))}))},{wrapperProps:{style:{display:"flex"}}})))),Me=X(function(e){/*#__PURE__*/return s("button",f({type:"button"},e.fieldProps,{children:e.element["#value"]}))}),Ie=X(function(e){var r=e.element,t=e.error,o=e.fieldProps,a=void 0===o?{}:o,l=e.tdProps,u=void 0===l?{}:l,c=n(w),d=c.data,p=c.setData;/*#__PURE__*/return s("tr",f({},a,{children:g(r).map(function(e){var n,o=r["#states"]?f({},r[e]["#states"],r["#states"]):null,a=r["#states"]?Object.assign({},o,r["#states"]):o;/*#__PURE__*/return i("td",f({},f({},u,K(null!=(n=r[e]["#wrapper_attributes"])?n:{})),{key:e}),/*#__PURE__*/s(fe,{element:f({},a?f({"#states":a},r[e]):r[e],{"#wrapper_attributes":[]}),error:t,value:d[r[e]["#webform_key"]],setValue:function(t){p(function(n){var i;return f({},n,((i={})[r[e]["#webform_key"]]=t,i))})}},e))})}))}),Ue=function(e){/*#__PURE__*/return s("pre",{children:/*#__PURE__*/s("code",{id:"submitted-data",children:JSON.stringify(e.submission)})})},ze=ee(X(oe(function(e){var r=e.element,t=e.fieldProps,i=n(w),o=i.data,a=i.setData,l=i.errors,u=g(r).map(function(e){var t=r["#states"]?f({},r[e]["#states"],r["#states"]):null;/*#__PURE__*/return s(fe,{element:f({},r[e],t?{"#states":t,"#access":!0}:{"#access":!0}),error:l[r[e]["#webform_key"]],value:o[r[e]["#webform_key"]],setValue:function(t){a(function(n){var i;return f({},n,((i={})[r[e]["#webform_key"]]=t,i))})}},r[e]["#webform_key"])});/*#__PURE__*/return s(c,{children:/*#__PURE__*/s("div",f({},t,{children:u}))})},{defaultWrapperType:"container"}))),We=function(e){var t=e.elements,n=r(0),i=n[0],o=n[1],a=g(t),l=t[a[i]],c=i>0,d=i===a.length-1,p=t.actions,m=function(e){if(l["#title"]==t[e]["#title"])return{color:"blue"}};/*#__PURE__*/return u("div",{children:[/*#__PURE__*/s("ul",{style:{display:"flex"},children:a.map(function(e){/*#__PURE__*/return u("li",{style:m(e),children:[t[e]["#title"],"----",">"]},e)})}),/*#__PURE__*/s("br",{}),/*#__PURE__*/u("h1",{children:["Page Title: ",l["#title"]]}),/*#__PURE__*/u("h1",{children:["Current page: ",i+1]}),/*#__PURE__*/s(ze,{element:f({},l)}),c&&/*#__PURE__*/s("button",{style:{border:"solid"},type:"button",className:"webform-button--previous",onClick:function(){return o(function(e){return e-1})},children:"Previous"}),!d&&/*#__PURE__*/s("button",{style:{border:"solid"},type:"button",onClick:function(){return o(function(e){return e+1})},children:"Next"}),d&&/*#__PURE__*/s(fe,{element:p})]})},Le=function e(r){return Object.entries(r).forEach(function(r){for(var t=0,n=Object.entries(r);t<n.length;t++){var i=n[t],o=i[0],a=i[1];"object"==typeof a&&null!==a&&Object.keys(a).includes("#access")&&(r[o]["#access"]=!0,e(r[o]))}}),!0},He={textfield:se,number:se,hidden:se,email:se,search:se,tel:se,url:se,textarea:ce,autocomplete:ae,checkbox:ke,checkboxes:Ve,entity_autocomplete:ae,range:we,radio:ke,radios:Ve,select:ue,webform_autocomplete:ae,webform_checkboxes_other:Ve,webform_entity_checkboxes:Ve,webform_entity_radios:Ve,webform_radios_other:Ve,webform_rating:Pe,webform_select_other:ue,webform_terms_of_service:Ce,container:be,fieldset:ve,webform_flexbox:he,webform_section:ye,webform_table:ge,webform_table_row:Ie,webform_address:me,webform_contact:me,webform_name:me,webform_link:me,webform_custom_composite:function(e){var r=e.element,n=e.error,i=e.value,o=e.setValue,a=e.labelProps,l=g(r["#element"]),u=!!r.add;return t(function(){r["#default_value"]&&Array.isArray(r["#default_value"])?o(r["#default_value"]):o([{}])},[]),/*#__PURE__*/s(c,{children:u?/*#__PURE__*/s(c,{children:/*#__PURE__*/s(pe,{element:r,value:i,setValue:o,error:n})}):/*#__PURE__*/s(te,{label:r["#title"],labelDisplay:r["#title_display"],access:r["#access"],isRequired:!1,error:n,children:l.map(function(e,t){var l=r.items[0][e];/*#__PURE__*/return s(fe,{element:f({},l,{"#webform_key":e,"#states":r["#_webform_states"],"#id":l["#id"],"#default_value":void 0}),value:i&&i[0][e]?i[0][e]:"",setValue:function(r){var t,n;o(i&&i[0]?[f({},i[0],(t={},t[e]=r,t))]:[(n={},n[e]=r,n)])},error:n?n[e]:null,labelProps:a},t)})})})},date:Ne,datelist:Te,datetime:Se,webform_time:qe,button:Me,submit:Ee,item:De,value:xe,webform_actions:Ee,webform_email_confirm:je,webform_multiple:pe,confirmation_page:function(e){var r=e.webform;/*#__PURE__*/return s("div",{children:r.confirmation.message&&r.confirmation.message.length>0?r.confirmation.message:/*#__PURE__*/u(c,{children:["New submission added to ",/*#__PURE__*/s("em",{children:r.title}),"."]})})},form_layout:function(e){var r=e.webform,i=e.status,o=n(w),a=o.registry,l=o.setData,d=o.data,p=o.errors,m=r.elements,b=r.confirmation,h=g(m),v=h.some(function(e){return"webform_wizard_page"===m[e]["#type"]});t(function(){"debug"===b.type&&"success"!==i&&window.localStorage.setItem("webformDebugData",JSON.stringify(d))},[d,i,b.type]);var y,_=function(){/*#__PURE__*/return s(c,{children:h.map(function(e){/*#__PURE__*/return s(fe,{element:m[e],setValue:function(r){l(function(t){var n;return f({},t,((n={})[m[e]["#webform_key"]]=r,n))})},value:d[m[e]["#webform_key"]],error:p[m[e]["#webform_key"]]},m[e]["#webform_key"])})})};if("success"===i){if("debug"===b.type){var k="undefined"==typeof window?d:JSON.parse(window.localStorage.getItem("webformDebugData"));/*#__PURE__*/return s(Ue,{submission:k})}if("page"===b.type||"inline"===b.type)return y=a.getComponent("confirmation_page"),/*#__PURE__*/s(y,{webform:r,submission:d});if("message"===b.type){var P=a.getComponent("message");/*#__PURE__*/return u(c,{children:[/*#__PURE__*/s(P,{type:"success",children:r.confirmation.message&&r.confirmation.message.length>0?r.confirmation.message:/*#__PURE__*/u(c,{children:["New submission added to ",/*#__PURE__*/s("em",{children:r.title}),"."]})}),_()]})}if("none"===b.type)return _()}if(v){for(var j=0,x=Object.entries(m);j<x.length;j++){var O=x[j],C=O[0],S=O[1];"object"==typeof S&&null!==S&&Object.keys(S).includes("#access")&&(m[C]["#access"]=!0,Le(m[C]))}/*#__PURE__*/return s(We,{elements:m})}return _()},message:function(e){/*#__PURE__*/return s("div",{children:e.children})},webform_wizard_page:ze,webform_message:Re,webform_markup:Fe},Je=new function(e){var r=this;void 0===e&&(e={}),this._registry=void 0,this.getComponent=function(e){var t;return null!=(t=r._registry.get(e))?t:null},this.setComponent=function(e,t){r._registry.set(e,t)},this._registry=new Map,Object.keys(e).forEach(function(t){r._registry.set(t,e[t])})}(He),Ge=["data","id","sid","customComponents","onSubmit","apiUrl","validate"],Be=/*#__PURE__*/function(e){var r,t;function n(r){var t;return(t=e.call(this)||this).response=void 0,t.response=r,t}return t=e,(r=n).prototype=Object.create(t.prototype),r.prototype.constructor=r,m(r,t),n}(/*#__PURE__*/h(Error)),Ke=function(n){var i=n.data,l=n.id,c=n.sid,d=n.customComponents,p=void 0===d?{}:d,m=n.onSubmit,b=n.apiUrl,h=void 0===b?"/api/webform":b,y=n.validate,_=v(n,Ge),g=Je;N(function(){Object.keys(p).forEach(function(e){g.setComponent(e,p[e])})}),t(function(){Object.keys(p).forEach(function(e){g.setComponent(e,p[e])})},[p]);var k=r({}),P=k[0],j=k[1],x=r(),C=x[0],S=x[1],T=r({}),D=T[0],E=T[1],A=o({}),V=e.useCallback(function(e,r){A.current[e]={validate:r.validate}},[]),R=e.useCallback(function(e){delete A.current[e]},[]),M=m||z,I=g.getComponent("form_layout"),U=g.getComponent("message"),W=function(e){var r=Object.keys(A.current).filter(function(e){return q(A.current[e].validate)}),t=r.map(function(r){return t=r,n=e[r],new Promise(function(e){return e(A.current[t].validate(n))});var t,n});return Promise.all(t).then(function(e){return e.reduce(function(e,t,n){return void 0===t||O(e,r[n],t),e},{})})};/*#__PURE__*/return u("form",f({},_,{onSubmit:function(e){var r;e.preventDefault(),(r=D,Promise.all([W(r),y?y(r):{}]).then(function(e){return a.all([e[0],e[1]],{arrayMerge:F})})).then(function(r){0!==Object.keys(r).length?(S("error"),j(r)):M({id:l,sid:c,event:e,data:D,setData:E,setStatus:S,setErrors:j,apiUrl:h})})},children:["error"===C?/*#__PURE__*/s(U,{type:"error",children:"An error occurred. Please try again."}):null,/*#__PURE__*/s(w.Provider,{value:{id:l,apiUrl:h,data:D,setData:E,setStatus:S,errors:P,registry:g,registerField:V,unregisterField:R},children:/*#__PURE__*/s(I,{webform:i,status:C})})]}))},Xe=function(e){var r=e.element,t=e.value,n=e.setValue,i=function(e){try{var r;return n(f({},t,((r={})[e.target.name]=e.target.value,r))),Promise.resolve()}catch(e){return Promise.reject(e)}};/*#__PURE__*/return s(te,{labelFor:r["#key"],label:r["#title"],isRequired:r["#required"],access:r["#access"],settings:null,error:e.error,children:/*#__PURE__*/u("div",{style:{display:"inline-flex",alignItems:"center"},children:[/*#__PURE__*/s("input",{type:"number",name:"feet",min:0,max:8,onChange:function(e){return i(e)}}),/*#__PURE__*/s("label",{style:{padding:"0.5em"},children:"feet"}),/*#__PURE__*/s("input",{type:"number",name:"inches",min:0,max:11,onChange:function(e){return i(e)}}),/*#__PURE__*/s("label",{style:{padding:"0.5em"},children:"inches"})]})})},$e=function(e,r,t){try{return Promise.resolve(function(){if("GET"===e.method){if("autocomplete_options"===e.query.op.toString()){var n=e.query,i=n.options_id,o=t.buildUrl("/webform_rest/"+n.id.toString()+"/autocomplete_options/"+i+"?_format=json");return Promise.resolve(t.fetch(o.toString(),{headers:{"Content-Type":"application/json"}})).then(function(e){var t;function n(n){if(t)return n;var i=r.end;return Promise.resolve(e.json()).then(function(e){return i.call(r,JSON.stringify(e)),r.status(200),r})}var i=function(){if(!e.ok)return Promise.resolve(e.json()).then(function(n){var i=r.status(e.status).json({message:n});return t=1,i})}();return i&&i.then?i.then(n):n(i)})}return r.end("{}"),r.status(404),r}return function(){if("POST"===e.method){var n=t.buildUrl("/webform_rest/submit?_format=json");return Promise.resolve(t.fetch(n.toString(),{method:"POST",body:JSON.stringify(e.body),headers:{"Content-Type":"application/json"}})).then(function(e){var t;function n(n){return t?n:(r.end(JSON.stringify(e)),r.status(200),r)}var i=function(){if(!e.ok)return Promise.resolve(e.json()).then(function(n){var i=r.status(e.status).json({message:n});return t=1,i})}();return i&&i.then?i.then(n):n(i)})}}()}())}catch(e){return Promise.reject(e)}};export{Ke as Webform,w as WebformContext,$e as WebformDefaultApiRoute,Be as WebformError,Xe as WebformHeight,F as arrayMerge,I as checkDateMinMax,He as components,U as convertDateToISO,D as cssStringToObject,z as defaultOnSubmit,g as getChildElements,V as getCurrentError,A as getIndexOfMultiValue,P as getNormalizedErrorMessages,q as isFunction,S as isInteger,T as isIterable,C as isObject,J as normalizeElements,E as reactPropertyMap,M as resolvePath,L as resolveWebformContent,W as resolveWebformSubmission,O as setIn,x as toKey,j as toPath,R as updateNameAndIdWithIndex,G as updateNestedObjectDefaultValue,N as useConstructor};
//# sourceMappingURL=index.esm.js.map
