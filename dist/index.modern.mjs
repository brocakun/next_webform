import*as e from"react";import{useState as t,useEffect as r,useContext as n,createElement as s,useRef as a}from"react";import l from"deepmerge";import o from"strtotime";import{jsx as i,jsxs as c,Fragment as d}from"react/jsx-runtime";import u from"classnames";function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p.apply(this,arguments)}function m(e,t){if(null==e)return{};var r,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)t.indexOf(r=a[n])>=0||(s[r]=e[r]);return s}function f(e){const t=Object.keys(e).length;let r=0;const n=[];for(const s of Object.keys(e)){if("#"===s.charAt(0))continue;if("type"===s)continue;const a=e[s];let l;l=void 0!==a["#weight"]?a["#weight"]:0,n.push({weight:Math.floor(1e3*l)+r/t,key:s}),r++}return n.sort((e,t)=>e.weight-t.weight),n.map(e=>e.key)}const b=/*#__PURE__*/e.createContext(null),y=e=>/*#__PURE__*/i("div",{dangerouslySetInnerHTML:{__html:e}}),h=e=>e?Object.keys(e).reduce((t,r)=>{const n=r.split("][");if(n.length>1)if(t[n[0]]||(t[n[0]]={}),2===n.length)"_item_"===n[1]?t[n[0]]=y(e[r]):t[n[0]][n[1]]=y(e[r]);else if("items"===n[1]||"_item_"===n[1]){const s=[...n.slice(2)].join("][");t[n[0]]=p({},t[n[0]],h({[s]:e[r]}))}else{const s=[...n.slice(1)].join("][");t[n[0]]=p({},t[n[0]],h(p({},t[n[0]],{[s]:e[r]})))}else t[r]=y(e[r]);return t},{}):null;function _(e){return e.split("][")}function g(e){return e.filter(e=>"items"!==e&&"_item_"!==e).join("][")}function v(e,t,r){const n=_(t);let s=e;for(let e=0;e<n.length;e++){const t=n[e];if(n.length-1===e)s[t]=r;else if(!s[t]){const r=n[e+1];s[t]=k(r)&&Number(r)>=0?[]:{}}s=s[t]}return e}function w(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e}const k=e=>Number.isInteger(e)||String(Math.floor(Number(e)))===e,x=e=>"function"==typeof e;function P(e){return null!=e&&"function"==typeof e[Symbol.iterator]}const O=e=>{const[r,n]=t(!1);r||(e(),n(!0))},j=e=>{const t={};return"string"==typeof e&&e.replace(/(?<=^|;)\s*([^:]+)\s*:\s*([^;]+)\s*/g,(e,r,n)=>{const s=r.replace(/-./g,e=>e[1].toUpperCase());return t[s]=n}),t},C={accept:"accept",acceptcharset:"acceptCharset","accept-charset":"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",alt:"alt",as:"as",async:"async",autocapitalize:"autoCapitalize",autocomplete:"autoComplete",autocorrect:"autoCorrect",autofocus:"autoFocus",autoplay:"autoPlay",autosave:"autoSave",capture:"capture",cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charSet",checked:"checked",children:"children",cite:"cite",class:"className",classid:"classID",classname:"className",cols:"cols",colspan:"colSpan",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",controlslist:"controlsList",coords:"coords",crossorigin:"crossOrigin",dangerouslysetinnerhtml:"dangerouslySetInnerHTML",data:"data",datetime:"dateTime",default:"default",defaultchecked:"defaultChecked",defaultvalue:"defaultValue",defer:"defer",dir:"dir",disabled:"disabled",disablepictureinpicture:"disablePictureInPicture",disableremoteplayback:"disableRemotePlayback",download:"download",draggable:"draggable",enctype:"encType",enterkeyhint:"enterKeyHint",for:"htmlFor",form:"form",formmethod:"formMethod",formaction:"formAction",formenctype:"formEncType",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang",htmlfor:"htmlFor",httpequiv:"httpEquiv","http-equiv":"httpEquiv",icon:"icon",id:"id",imagesizes:"imageSizes",imagesrcset:"imageSrcSet",innerhtml:"innerHTML",inputmode:"inputMode",integrity:"integrity",is:"is",itemid:"itemID",itemprop:"itemProp",itemref:"itemRef",itemscope:"itemScope",itemtype:"itemType",keyparams:"keyParams",keytype:"keyType",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",low:"low",manifest:"manifest",marginwidth:"marginWidth",marginheight:"marginHeight",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",nomodule:"noModule",nonce:"nonce",novalidate:"noValidate",open:"open",optimum:"optimum",pattern:"pattern",placeholder:"placeholder",playsinline:"playsInline",poster:"poster",preload:"preload",profile:"profile",radiogroup:"radioGroup",readonly:"readOnly",referrerpolicy:"referrerPolicy",rel:"rel",required:"required",reversed:"reversed",role:"role",rows:"rows",rowspan:"rowSpan",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",start:"start",step:"step",style:"style",summary:"summary",tabindex:"tabIndex",target:"target",title:"title",type:"type",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap"},q=e=>e.match(/\[(\d.*?)\]/g).pop(),$=(t,r)=>t||("string"==typeof r||/*#__PURE__*/e.isValidElement(r)?r:void 0),S=(e,t,r)=>{const n=e.slice();return t.forEach((t,s)=>{void 0===n[s]?n[s]=r.cloneUnlessOtherwiseSpecified(t,r):r.isMergeableObject(t)?n[s]=l(e[s],t,r):-1===e.indexOf(t)&&n.push(t)}),n};function T(e,t){const r=f(t);if(r.length)for(const n of r){const r=t[n]["#id"],s=t[n]["#name"];if("]"===r.charAt(r.length-1)){const a=r.replace(/\[(.+?)\]/g,"["+e+"]"),l=s.replace(/\[(.+?)\]/g,"["+e+"]");t[n]["#id"]=a,t[n]["#name"]=l}else t[n]["#id"]=`${t[n]["#id"]}[${e}]`,t[n]["#name"]=`${t[n]["#name"]}[${e}]`;T(e,t[n])}}function N(e,t){return e.split(".").reduce(function(e,t){return e?e[t]:null},t||self)}const D=(e,t)=>{if(t["#date_date_min"]){const r=V(t["#date_date_min"]);if(o(e)<o(r))return`Date must be on or after ${r}.`}if(t["#date_date_max"]){const r=V(t["#date_date_max"]);if(o(e)>o(r))return`Date must be on or before ${r}.`}},V=e=>"today"===e?(new Date).toISOString().substring(0,10):"number"==typeof o(e)?new Date(e).toISOString().split("T")[0]:o(e).toISOString().substring(0,10),E=["#process","#groups","#after_build","#pre_render","#value_callback","#theme_wrappers","#allowed_tags","#attached","#element_validate","#cache","#prefix","#suffix","#webform_children","#webform_parents","#array_parents","#autocomplete_route_parameters","#autocomplete_route_name","#ajax","#ajax_processed","#ajax_prefix","#ajax_suffix","#child_keys","#ajax_attributes","#tabledrag","#sorted","#processed","#after_build_done","#tree"],A=e=>(E.forEach(t=>{delete e[t]}),f(e).forEach(function(t){e[t]=A(e[t])}),e);async function F(e,t,r){const n=t.buildUrl(`/webform/${e}?_format=json`),s=t.buildUrl(`/webform_rest/${e}/elements?_format=json`),[a,l]=await Promise.all([t.fetch(n.toString(),p({},r,{headers:{"Content-Type":"application/json"}})),t.fetch(s.toString(),p({},r,{headers:{"Content-Type":"application/json"}}))]);if(!a.ok){const e=await a.json();throw new Error(e)}if(!l.ok){const e=await l.json();throw new Error(e)}const o=A(await l.json()),i=await a.json();return{id:e,uuid:i.uuid,title:i.title,description:i.description,status:i.status,confirmation:{type:i.settings.confirmation_type,url:i.settings.confirmation_url,message:i.settings.confirmation_message},elements:o}}async function R({id:e,data:t,setData:r,setStatus:n,setErrors:s,apiUrl:a}){const l=p({},t,{webform_id:e}),o=await fetch(a,{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json"}});if(o.ok)n("success"),r({}),s({});else{n("error");const e=await o.json();s(h(e.message.error))}}const M=e=>function(t){return r(()=>{t.value||!t.element["#default_value"]||t.element["#default_value"].headers||t.setValue(t.element["#default_value"])},[]),/*#__PURE__*/i(e,p({},t))},I=e=>{const t=["id","data-drupal-selector","webform-remove-for-attribute"];return Object.keys(e).filter(e=>!t.includes(e)).reduce((t,r)=>("class"===r?t.className=u(e[r]):C[r]?t[C[r]]=e[r]:t[r]=e[r],t),{})},z=e=>function(t){var r,n,s,a,l,o;const c=p({},I(null!=(r=t.element["#attributes"])?r:{}),null!=(n=t.fieldProps)?n:{});c.style&&(c.style=j(c.style));const d=p({},I(null!=(s=t.element["#label_attributes"])?s:{}),null!=(a=t.labelProps)?a:{});d.style&&(d.style=j(d.style));const u=p({},I(null!=(l=t.element["#wrapper_attributes"])?l:{}),null!=(o=t.wrapperProps)?o:{});return u.style&&(u.style=j(u.style)),/*#__PURE__*/i(e,p({},t,{fieldProps:c,labelProps:d,wrapperProps:u}))};function U(e){const t=e.match(/\[name=["|']([A-z][A-z\d-_.:]*)["|']\]$/);return t&&t[1]}function W(e,t){if(w(e[Object.keys(e)[0]]))switch(Object.keys(e[Object.keys(e)[0]])[0]){case"pattern":return"string"==typeof t&&new RegExp(e.value.pattern).test(t);case"!pattern":return"string"==typeof t&&!new RegExp(e.value.pattern).test(t);case"less":return t<e.value.less;case"less_equal":return t<=e.value.less_equal;case"greater":return t>e.value.greater;case"greater_equal":return t>=e.value.greater_equal;case"between":case"!between":{const r=e.value.between,n=r.substring(0,r.indexOf(":")),s=r.substring(r.indexOf(":"),r.length-1);return"between"==Object.keys(e)[0]?t>=n&&t<=s:t<n||t>s}}else switch(e&&Object.keys(e)[0]){case"empty":return!t;case"filled":return!!t;case"checked":return 1==t;case"unchecked":return 0==t;case"value":return t==e.value;case"!value":return t!=e.value}}const L=e=>{switch(e){case"invisible":case"invisible-slide":case"!visible":return{"#access":!1};case"visible":case"visible-slide":case"!invisible":return{"#access":!0};case"enabled":case"!disabled":return{"#disabled":!1};case"disabled":case"!enabled":return{"#disabled":!0};case"required":case"!optional":return{"#required":!0};case"optional":case"!required":return{"#required":!1};case"checked":case"!unchecked":return{"#checked":!0};case"unchecked":case"!checked":return{"#unchecked":!0};case"readonly":case"!readwrite":return{"#readonly":!0};case"readwrite":case"!readonly":return{"#readonly":!1}}},H=(e,t)=>{const{allConditionsForTrue:r,anyConditionForTrue:n,oneConditionForTrue:s,webformStates:a}=((e,t)=>{const r={},n={},s={};let a;if(e&&!Object.keys(e).includes("headers")){a=e;for(const e of Object.keys(a)){r[e]={},n[e]={},s[e]={};for(const c of Object.keys(a[e]))if(isNaN(Number(c))){var l;const n=U(c);if(Object.prototype.hasOwnProperty.call(t,n)&&"string"!=typeof t[n]&&"boolean"!=typeof t[n]){console.warn(`Unexpected type "${typeof t[n]}" for element "${n}"`);continue}r[e][n]=W(a[e][c],null!=(l=t[n])?l:void 0)}else if("or"!==a[e][c]&&"xor"!==a[e][c]){const r=U(Object.keys(a[e][c])[0]),l=Object.values(a[e][c])[0];if(Object.prototype.hasOwnProperty.call(t,r)&&"string"!=typeof t[r]&&"boolean"!=typeof t[r]){console.warn(`Unexpected type "${typeof t[r]}" for element "${r}"`);continue}var o;if(Object.values(a[e]).includes("or"))n[e][r]=W(l,null!=(o=t[r])?o:void 0);else if(Object.values(a[e]).includes("xor")){var i;s[e][r]=W(l,null!=(i=t[r])?i:void 0)}}}}return{allConditionsForTrue:r,anyConditionForTrue:n,oneConditionForTrue:s,webformStates:a}})(e,t);if(!a||0===Object.keys(a).length||!Object.keys(a)[0].length)return;const l={};for(const e of Object.keys(a))Object.keys(r[e]).length&&Object.values(r[e]).every(e=>!0===e)||Object.keys(n[e]).length&&Object.values(n[e]).includes(!0)||Object.keys(s[e]).length&&1==Object.values(s[e]).filter(e=>1==e).length?Object.assign(l,L(e)):Object.assign(l,L("!"+e));return l},J=e=>function(s){const[a,l]=t({}),{data:o}=n(b),{element:c}=s,d=c.add?c["#_webform_states"]:c["#states"],u=(e=>{if(!e||Object.keys(e).includes("headers"))return[];const t=[];for(const r of Object.keys(e))for(const n of Object.keys(e[r]))if(isNaN(Number(n))){const e=U(n);t.push(e)}else if("or"!==e[r][n]&&"xor"!==e[r][n]){const s=U(Object.keys(e[r][n])[0]);t.push(s)}return t})(d);return r(()=>{l(H(d,o))},[]),r(()=>{l(H(d,o))},u.map(e=>o[e])),/*#__PURE__*/i(e,p({},s,{element:p({},c,a)}))},G=["children","label","labelProps","labelFor","isRequired","description","descriptionDisplay","descriptionProps","labelDisplay","error","access"],K=e=>{let{children:t,label:r,labelProps:n={},labelFor:s,isRequired:a,description:l,descriptionDisplay:o,descriptionProps:d={},labelDisplay:f="before",error:b,access:y}=e,h=m(e,G);const _=u(n.className,{"required-field":a,"visually-hidden":"invisible"===f}),g=u(d.className,{"visually-hidden":"invisible"===o}),v=/*#__PURE__*/i("label",p({},n,{className:_,htmlFor:s,children:r}));return y?/*#__PURE__*/c("div",p({},h,{children:[/*#__PURE__*/i("style",{suppressHydrationWarning:!0,children:"\n.required-field:after {\n  content: ' *';\n  color: red;\n}\n.invalid-feedback {\n  color: red;\n}\n.visually-hidden {\n  position: absolute !important;\n  clip: rect(1px, 1px, 1px, 1px);\n  overflow: hidden;\n  height: 1px;\n  width: 1px;\n  word-wrap: normal;\n}\n        "}),!["after","none"].includes(f)&&v,"before"===o&&l&&/*#__PURE__*/i("div",p({},d,{children:l})),t,("after"===o||"invisible"===o)&&l&&/*#__PURE__*/i("div",p({},d,{className:g,children:l})),"after"===f&&v,b&&/*#__PURE__*/i("div",{className:"invalid-feedback",children:b})]})):null},X=["children","label","labelProps","labelDisplay","labelFor","description","descriptionDisplay","descriptionProps","isRequired","error","access"],B=e=>{let{children:t,label:r,labelProps:n={},description:s,descriptionDisplay:a,descriptionProps:l={},isRequired:o,error:d,access:f}=e,b=m(e,X);const y=u(n.className,{"required-field":o}),h=u(l.className,{"visually-hidden":"invisible"===a}),_=/*#__PURE__*/i("legend",p({},n,{className:y,children:r}));return f?/*#__PURE__*/c("fieldset",p({},b,{children:[/*#__PURE__*/i("style",{suppressHydrationWarning:!0,children:"\n.required-field:after {\n  content: ' *';\n  color: red;\n}\n.invalid-feedback {\n  color: red;\n}\n.visually-hidden {\n  position: absolute !important;\n  clip: rect(1px, 1px, 1px, 1px);\n  overflow: hidden;\n  height: 1px;\n  width: 1px;\n  word-wrap: normal;\n}\n        "}),_,"before"===a&&s&&/*#__PURE__*/i("div",p({},l,{className:h,children:s})),t,("after"===a||"invisible"===a)&&s&&/*#__PURE__*/i("div",p({},l,{className:h,children:s})),d&&/*#__PURE__*/i("div",{className:"invalid-feedback",children:d})]})):null},Y=(t,r={})=>function(n){const{element:s,error:a}=n,l=p({defaultWrapperType:"form_element",displayErrors:!0,labelFor:e=>e["#id"],labelProps:{},wrapperProps:{}},"function"==typeof r?r(s):r),{labelFor:o,defaultWrapperType:c,displayErrors:d}=l,u=s["#wrapper_type"]?s["#wrapper_type"]:c,m="form_element"===u&&s["#title"]?s["#title_display"]:"none",f="string"==typeof a||/*#__PURE__*/e.isValidElement(a),b="fieldset"!==u?K:B,y=p({},n.labelProps,l.labelProps),h=p({},n.wrapperProps,l.wrapperProps);/*#__PURE__*/return i(b,p({label:s["#title"],isRequired:s["#required"],access:s["#access"],labelDisplay:m,error:d&&f?a:void 0,labelProps:y,description:s["#description"]?/*#__PURE__*/i("div",{dangerouslySetInnerHTML:{__html:s["#description"]["#markup"]}}):void 0,descriptionDisplay:s["#description_display"]},h,{labelFor:"none"!==m?(()=>{if("function"==typeof o)return o(s)})():void 0,children:/*#__PURE__*/i(t,p({},n))}))};var Q=J(M(z(Y(({element:e,setValue:s,value:a="",fieldProps:l})=>{const[o,u]=t({}),[m,f]=t(null),y=n(b);return r(()=>{Array.isArray(e["#autocomplete_items"])?u(e["#autocomplete_items"].reduce((e,t)=>(e[t]=t,e),{})):"string"==typeof e["#autocomplete_items"]?(async()=>{const t=`${y.apiUrl}?op=autocomplete_options&id=${y.id}&options_id=${e["#autocomplete_items"]}`,r=await fetch(t);if(!r.ok)throw Error((await r.json()).message.message);u(await r.json())})():console.warn(`Unsupported autocomplete type on element ${e["#name"]}.`)},[e["#autocomplete_items"]]),r(()=>{f(a)},[a]),/*#__PURE__*/c(d,{children:[/*#__PURE__*/i("input",p({type:"text",name:e["#webform_key"],onChange:e=>(async e=>{s(o[e.target.value]?e.target.value:""),f(e.target.value)})(e),disabled:e["#disabled"],hidden:!e["#access"],required:e["#required"],readOnly:e["#readonly"],value:null!=m?m:a},l,{id:`${e["#id"]}`,list:`${e["#webform_key"]}-datalist`})),/*#__PURE__*/i("datalist",{id:`${e["#webform_key"]}-datalist`,children:Object.keys(o).map((e,t)=>/*#__PURE__*/i("option",{value:e,children:o[e]},t))})]})}))));const Z={number:"number",hidden:"hidden",email:"email",search:"search",tel:"tel",url:"url",textfield:"text"};var ee=J(M(z(Y(({element:e,value:t="",setValue:r,fieldProps:n})=>{var s;return e["#type"]in Z||console.warn(`${e["#type"]} which was used on ${e["#webform_key"]} is not supported by WebformText.`),/*#__PURE__*/i(d,{children:/*#__PURE__*/i("input",p({type:null!=(s=Z[e["#type"]])?s:e["#type"],name:e["#name"],value:t,onChange:e=>(async e=>{r(e.target.value)})(e),disabled:e["#disabled"],hidden:!e["#access"],required:e["#required"],readOnly:e["#readonly"],placeholder:e["#placeholder"]},n,{id:e["#id"]}))})})))),te=J(M(z(Y(({element:e,setValue:r,value:n="",fieldProps:s})=>{const[a,l]=t(!1),o="webform_select_other"===e["#type"]?function(){let t={};for(const r of Object.keys(e))"select"==r&&(t=e[r]);return t}():null;/*#__PURE__*/return c(d,{children:[/*#__PURE__*/c("select",p({name:e["#name"],onChange:e=>(async e=>{"Other"==e.target.value?l(!a):a?(l(!a),r(e.target.value)):r(e.target.value)})(e),value:n,disabled:e["#disabled"],hidden:!e["#access"],required:e["#required"]},s,{id:e["#id"],children:["select"==e["#webform_plugin_id"]||void 0===e["#webform_plugin_id"]&&"webform_select_other"!==e["#type"]?function(e){const t=[];let r;for(const n of Object.keys(e))n.length?t.push(e[n]):r=e[n];return t.unshift(r),t}(e["#options"]).map((e,t)=>/*#__PURE__*/i("option",{value:e,children:e},t)):null,"webform_entity_select"==e["#webform_plugin_id"]?Object.keys(e["#options"]).map(t=>/*#__PURE__*/i("option",{value:t,children:e["#options"][t]},t)):null,"webform_select_other"===e["#type"]&&o["#options"]?/*#__PURE__*/c(d,{children:[Object.values(o["#options"]).map((e,t)=>{if("Other…"!=e)/*#__PURE__*/return i("option",{value:e.toString(),children:e},t)}),/*#__PURE__*/i("option",{value:"Other",children:"Other..."})]}):null]})),a?/*#__PURE__*/i("input",{type:"text",id:e["#webform_key"],name:e["#webform_key"],onInput:e=>(async e=>{r(e.target.value)})(e),value:n}):null]})})))),re=J(M(z(Y(({element:e,value:t="",setValue:r,fieldProps:n})=>/*#__PURE__*/i(d,{children:/*#__PURE__*/i("textarea",p({name:e["#webform_key"],value:t,onChange:e=>(async e=>{r(e.target.value)})(e),disabled:e["#disabled"],hidden:!e["#access"],required:e["#required"],readOnly:e["#readonly"],placeholder:e["#placeholder"]},n,{id:e["#id"]}))})))));const ne=({element:e,error:t})=>/*#__PURE__*/c("code",{children:[t,/*#__PURE__*/i("pre",{children:JSON.stringify(e,null,2)})]}),se=e=>{const{registry:t}=n(b),{element:r,error:s}=e;if(t.getComponent(r["#type"])){const n=t.getComponent(r["#type"]);/*#__PURE__*/return i(n,p({},e))}/*#__PURE__*/return i(ne,{element:r,error:s})};var ae=J(z(Y(({element:e,value:t,setValue:n,error:s,tableProps:a={},trProps:l={},tdProps:o={}})=>{const u=Array.isArray(t)?t:[],m="webform_custom_composite"===e["#type"],b=e=>{if(!P(t))throw new TypeError(`"${typeof t}" is not iterable`);const r=[...t];r.splice(e,1),n(r)},y=(t,r,a=null)=>{const l=[...e["#parents"],"items",t,"_item_"],o=p({},r,e.items[t]?{"#access":e["#access"],"#states":e["#_webform_states"],"#parents":l}:{"#default_value":void 0,"#access":e["#access"],"#states":e["#_webform_states"],"#parents":l});/*#__PURE__*/return i(se,{element:o,setValue:e=>{const r=Array.from(u);a?r[t][a]=e:r[t]=e,n(r)},value:a?u[t][a]:u[t],error:s?s[t]:null},o["#id"])},h=t=>{const r=f(e["#element"]),n=e.items[t]?t:0;if(Array.isArray(r)&&r.length)return r.map(r=>{const s=N(e.items[n]._item_?`items.${n}._item_.${r}`:`items.${n}.${r}`,e),a=p({},s,{"#webform_key":r,"#id":`${s["#id"]}[${t}]`}),l=JSON.parse(JSON.stringify(a));return T(t,l),y(t,l,r)});{const r=p({},e.items[n]._item_,{"#webform_key":`${e.items[n]._item_["#webform_key"]}[${t}]`,"#id":`${e.items[n]._item_["#webform_key"]}[${t}]`});return y(t,r)}},_=e["#cardinality"],g=u.length;r(()=>{0===g&&(e["#default_value"]&&Array.isArray(e["#default_value"])?n(e["#default_value"]):n([""]))},[]);const v=[];for(let t=0;t<g;t++){const r=p({},e.items[0]._operations_.remove,{"#type":"button","#value":"Remove"});v.push(/*#__PURE__*/c("tr",p({},l,{children:[/*#__PURE__*/i("td",p({},o,{children:h(t)})),/*#__PURE__*/i("td",p({},o,{children:/*#__PURE__*/i(se,{element:r,fieldProps:{onClick:e=>{e.preventDefault(),b(t)},id:`${e["#webform_key"]}-remove-btn-${t}`}})}))]}),t))}/*#__PURE__*/return c(d,{children:[/*#__PURE__*/i("table",p({style:{width:"100%"}},a,{children:/*#__PURE__*/i("tbody",{children:v})})),(g<_||!_)&&/*#__PURE__*/i("div",{children:/*#__PURE__*/i(se,{element:p({},e.add.submit,{"#type":"button"}),fieldProps:{onClick:e=>{e.preventDefault(),u.push(m?{}:""),n(u)},id:`${e["#webform_key"]}-add-btn`}})})]})},{labelFor:!1}))),le=M(Y(({element:e,error:t,value:r,setValue:n})=>{const s=f(e);/*#__PURE__*/return i(d,{children:s.map(s=>/*#__PURE__*/i(se,{element:p({"#webform_key":e["#webform_key"],"#states":e["#states"]},e[s],{"#id":e["#webform_multiple"]?`${e[s]["#id"]}${q(e["#webform_key"])}`:e[s]["#id"]}),value:r&&r[s]?r[s]:"",setValue:e=>{n(p({},r,{[s]:e}))},error:t?t[s]:null},s))})},{displayErrors:!1,defaultWrapperType:"fieldset"})),oe=J(z(Y(({element:e,fieldProps:t})=>{const{data:r,setData:s,errors:a}=n(b),l=f(e).map(t=>{const n=e["#states"]?p({},e[t]["#states"],e["#states"]):null;/*#__PURE__*/return i(se,{element:n?p({},e[t],{"#states":n}):e[t],error:a[e[t]["#webform_key"]],value:r[e[t]["#webform_key"]],setValue:r=>{s(n=>p({},n,{[e[t]["#webform_key"]]:r}))}},e[t]["#webform_key"])});/*#__PURE__*/return i(d,{children:/*#__PURE__*/i("div",p({},t,{children:l}))})},{defaultWrapperType:"container"}))),ie=J(Y(({element:e,itemProps:t={}})=>{const{data:r,setData:a,errors:l}=n(b),o=p({style:{flexGrow:1}},t),c=f(e).map(t=>{const n=e["#states"]?p({},e[t]["#states"],e["#states"]):null;/*#__PURE__*/return s("div",p({},o,{key:e[t]["#webform_key"]}),/*#__PURE__*/i("div",{children:/*#__PURE__*/i(se,{element:n?p({},e[t],{"#states":n}):e[t],error:l[e[t]["#webform_key"]],value:r[e[t]["#webform_key"]],setValue:r=>{a(n=>p({},n,{[e[t]["#webform_key"]]:r}))}})},e[t]["#webform_key"]))});/*#__PURE__*/return i(d,{children:c})},e=>{var t,r;return{wrapperProps:p({},I(null!=(t=e["#attributes"])?t:{}),{style:{display:"flex",boxSizing:"border-box",gap:"1rem",justifyContent:null!=(r=e["#align_items"])?r:"flex-start"}})}})),ce=J(Y(({element:e})=>{const{data:t,setData:r,errors:s}=n(b),a=f(e).map(n=>{const a=e["#states"]?p({},e[n]["#states"],e["#states"]):null;/*#__PURE__*/return i(se,{element:a?p({},e[n],{"#states":a}):e[n],error:s[e[n]["#webform_key"]],value:t[e[n]["#webform_key"]],setValue:t=>{r(r=>p({},r,{[e[n]["#webform_key"]]:t}))}},e[n]["#webform_key"])});/*#__PURE__*/return i(d,{children:a})},{defaultWrapperType:"fieldset"})),de=J(z(({element:e,error:t,labelProps:r,fieldProps:s,wrapperProps:a={}})=>{const{data:l,setData:o,errors:c}=n(b),d=f(e).map(t=>{const r=e["#states"]?p({},e[t]["#states"],e["#states"]):null;/*#__PURE__*/return i(se,{element:r?p({},e[t],{"#states":r}):e[t],error:c[e[t]["#webform_key"]],value:l[e[t]["#webform_key"]],setValue:r=>{o(n=>p({},n,{[e[t]["#webform_key"]]:r}))}},e[t]["#webform_key"])});/*#__PURE__*/return i(K,p({label:e["#title"],isRequired:e["#required"],labelDisplay:e["#title_display"],access:e["#access"],settings:null,error:t,labelProps:r},a,{children:/*#__PURE__*/i("section",p({},s,{style:s.style,children:d}))}))}));const ue=["data"];var pe=J(z(({element:e,error:t,wrapperProps:r={},fieldProps:n={},theadProps:a={},tbodyProps:l={},trProps:o={},tdProps:d={},labelProps:u})=>{const b=f(e).map(t=>"webform_table_row"!==e[t]["#type"]?/*#__PURE__*/i("tr",{children:/*#__PURE__*/i("td",{children:/*#__PURE__*/c("div",{children:["The form element ",/*#__PURE__*/i("em",{children:t})," is not inside a table row. To render the form element, it must be placed inside a table row."]})})},t):/*#__PURE__*/i(se,{element:p({},e[t],{"#states":e["#states"]}),fieldProps:o,tdProps:d},t)),y=e["#header"];/*#__PURE__*/return i(K,p({label:e["#title"],isRequired:e["#required"],labelDisplay:e["#title_display"],access:e["#access"],settings:null,error:t,labelProps:u},r,{children:/*#__PURE__*/c("table",p({},n,{children:[/*#__PURE__*/i("thead",p({},a,{children:/*#__PURE__*/i("tr",p({},o,{children:y&&y.length?y.map((e,t)=>{const{data:r}=e,n=m(e,ue);/*#__PURE__*/return s("th",p({},I(n),{key:t}),r["#markup"])}):null}))})),/*#__PURE__*/i("tbody",p({},l,{children:b}))]}))}))})),me=J(M(z(Y(({element:e,value:t=0,setValue:r,fieldProps:n})=>{const s=/*#__PURE__*/i("output",{htmlFor:e["#id"],style:{below:{transform:`translateX(${t}px)`,display:"block",position:"absolute",padding:"2px 5px",textAlign:"center",border:"1px solid #bbb",background:"#ededed"},above:{transform:`translateX(${t}px)`,display:"block",position:"absolute",padding:"2px 5px",textAlign:"center",border:"1px solid #bbb",background:"#ededed",bottom:"22px"},left:{marginRight:"5px"},right:{marginLeft:"5px"}}[e["#output"]],name:"result",children:t});/*#__PURE__*/return c("div",{className:"form-type-range",style:{display:"block",position:"relative"},children:[e["#output"]&&"left"===e["#output"]?s:null,/*#__PURE__*/i("input",p({type:e["#type"],name:e["#webform_key"],min:e["#min"]?e["#min"]:null,max:e["#max"]?e["#max"]:null,onChange:e=>(async e=>{r(e.target.value)})(e),disabled:e["#disabled"],hidden:!e["#access"],required:e["#required"],readOnly:e["#readonly"]},n,{id:e["#id"],value:t})),e["#output"]&&"left"!==e["#output"]?s:null]})})))),fe=J(M(z(Y(({element:e,setValue:n,fieldProps:s,value:a})=>{"checkbox"!==e["#type"]&&"radio"!==e["#type"]&&console.warn(`${e["#type"]} which was used on ${e["#webform_key"]} is not supported by WebformCheckbox.`);const[l,o]=t(null!=a?a:!!e["#checked"]&&e["#checked"]);return r(()=>{"boolean"==typeof a&&o(a)},[a]),/*#__PURE__*/i(d,{children:/*#__PURE__*/i("div",{children:/*#__PURE__*/i("input",p({type:e["#type"],name:e["#name"],onChange:e=>(async e=>{n(e.target.checked)})(e),disabled:e["#disabled"],hidden:!(!e["#access"]||e["#access"]),required:e["#required"],readOnly:e["#readonly"],checked:l,id:e["#id"]},s,{value:e["#return_value"]}))})})},{wrapperProps:{style:{display:"flex"}}})))),be=J(M(Y(({element:e,value:r=0,setValue:n,fieldProps:s})=>{const[a,l]=t(0),o=e["#max"]?e["#max"]:5;/*#__PURE__*/return i(d,{children:/*#__PURE__*/c("div",{className:"star-rating",children:[/*#__PURE__*/i("input",p({defaultValue:r,name:e["#webform_key"],hidden:!0,type:"range"},s,{id:e["#webform_key"]})),/*#__PURE__*/i("style",{suppressHydrationWarning:!0,children:"\nbutton {\n  backgroundColor: 'transparent',\n  border: 'none',\n  outline: 'none',\n  cursor: 'pointer',\n}\n.on {\n  color: rgb(14 165 233);\n  }\n.off {\ncolor: #ccc;\n}\n.star-rating {\nfont-size: 2rem;\n}\n}"}),Array(o).fill(0).map((t,s)=>/*#__PURE__*/i("button",{type:"button",className:(s+=1)<=(a||r)?"on":"off",onClick:()=>n(s),onMouseEnter:()=>l(s),onMouseLeave:()=>l(r),disabled:e["#disabled"],hidden:!e["#access"],children:/*#__PURE__*/i("span",{className:"star",children:"★"})},s))]})})}))),ye=J(M(z(({element:s,error:a,setValue:l,labelProps:o,value:c,fieldProps:d,wrapperProps:u={}})=>{const{registerField:m}=n(b),[y,h]=t(""),[_,v]=t("");e.useEffect(()=>{s["#parents"]&&m(g(s["#parents"]),{validate:()=>{if(y!==_)return"The specified email addresses do not match."}})}),r(()=>{""!==c&&(h(c),v(c))},[c]),r(()=>{l(y&&_?y!==_?"":y:"")},[y,_]);const w=f(s).map(e=>/*#__PURE__*/i(se,{element:p({},s[e],{"#states":s["#states"]}),error:a?a[e]:null,value:"mail_1"===e?y:_,setValue:t=>{"mail_1"===e?h(t):"mail_2"===e&&v(t)},labelProps:o,fieldProps:d},e));/*#__PURE__*/return i(K,p({isRequired:!1,labelDisplay:"none",error:a,access:s["#access"]},u,{children:w}))}))),he=J(({element:e,error:t,fieldProps:r={},labelProps:n={},wrapperProps:s={}})=>/*#__PURE__*/i(K,p({label:e["#title"],isRequired:e["#required"],labelDisplay:e["#title_display"],access:e["#access"],settings:null,error:t,labelProps:n},s,{labelFor:e["#webform_key"],children:/*#__PURE__*/i("div",p({},r,{id:e["#webform_key"],children:e["#value"]}))})));const _e=e=>{const t=t=>{e.onClose&&e.onClose(t)};return e.show?/*#__PURE__*/c("div",{className:"modal",id:"modal",onClick:t,children:[/*#__PURE__*/i("style",{suppressHydrationWarning:!0,children:'\n.modal {\n    width: 500px;\n    background: white;\n    border: 1px solid #ccc;\n    transition: 1.1s ease-out;\n    box-shadow: -2rem 2rem 2rem rgba(0, 0, 0, 0.2);\n    filter: blur(0);\n    transform: translate(-50%, -5%);\n    visibility: visible;\n    position: absolute;\n    opacity: 1;\n    left: 50%;\n    z-index: 100;\n}\n.modal.off {\n    opacity: 0;\n    visibility: hidden;\n    filter: blur(8px);\n    transform: scale(0.33);\n    box-shadow: 1rem 0 0 rgba(0, 0, 0, 0.2);\n}\n@supports (offset-rotation: 0deg) {\n    offset-rotation: 0deg;\n    offset-path: path("M 250,100 S -300,500 -700,-200");\n    .modal.off {\n        offset-distance: 100%;\n    }\n}\n@media (prefers-reduced-motion) {\n    .modal {\n        offset-path: none;\n    }\n}\n.modal h2 {\n    border-bottom: 1px solid #ccc;\n    padding: 1rem;\n    margin: 0;\n}\n.modal .content {\n    padding: 1rem;\n}\n.modal .actions {\n    border-top: 1px solid #ccc;\n    background: #eee;\n    padding: 0.5rem 1rem;\n}\n#centered-toggle-button {\n    position: absolute;\n}\n\n'}),/*#__PURE__*/i("div",{className:"content",children:e.children}),/*#__PURE__*/i("div",{className:"actions",children:/*#__PURE__*/i("button",{className:"toggle-button",onClick:t,children:"Close"})})]}):null};var ge=J(M(z(Y(({element:e,setValue:r,fieldProps:n,labelProps:s})=>{const[a,l]=t(!1),[o,u]=t(!!e["#checked"]&&e["#checked"]),[m,f]=t(!e["#access"]||e["#access"]);/*#__PURE__*/return i(d,{children:/*#__PURE__*/c("div",{children:[/*#__PURE__*/i("input",p({type:"checkbox",id:e["#id"],name:e["#webform_key"],onChange:e=>(async e=>{u(!o),r(e.target.value?"1":"0")})(e),disabled:e["#disabled"],hidden:!m,required:e["#required"],readOnly:e["#readonly"],checked:o},n)),/*#__PURE__*/i(_e,{onClose:()=>l(!1),show:a,children:/*#__PURE__*/i("div",{dangerouslySetInnerHTML:{__html:e["#terms_content"]["#markup"]}})}),/*#__PURE__*/i("label",p({htmlFor:e["#id"]},s,{children:(()=>{const t=new RegExp(/(.*){(.*)}(.*)/);if(!t.test(e["#title"]))/*#__PURE__*/return i(d,{children:e["#title"]});const r=t.exec(e["#title"]);/*#__PURE__*/return c(d,{children:[r[1],/*#__PURE__*/i("a",{href:"#terms",role:"button",target:"_blank",className:"terms-link",onClick:e=>{e.preventDefault(),l(!a)},children:r[2]}),r[3]]})})()}))]})})},{labelProps:{style:{display:"none"}}})))),ve=J(M(z(({element:t,setValue:r,value:s,error:a,fieldProps:l,labelProps:o,wrapperProps:c={}})=>{const{registerField:d}=n(b),[u="",m=""]=(null!=s?s:"").split("T"),y={date:u,time:m};e.useEffect(()=>{t["#parents"]&&d(g(t["#parents"]),{validate:e=>{if(!e)return;const t=new RegExp("^((19|20)\\d{2})-((0|1)\\d{1})-((0|1|2)\\d{1})T(2[0-3]|[01][0-9]):[0-5][0-9]"),r=new RegExp("^((19|20)\\d{2})-((0|1)\\d{1})-((0|1|2)\\d{1})T(2[0-3]|[01][0-9]):[0-5][0-9]:[0-5][0-9]");return t.test(e)||r.test(e)?void 0:"The value is invalid. Please fill out every field."}})},[]);const h=f(t);/*#__PURE__*/return i(K,p({label:t["#title"],labelDisplay:t["#title_display"],access:t["#access"],isRequired:!1,error:a},c,{children:/*#__PURE__*/i("div",{id:t["#id"],children:h.map(e=>/*#__PURE__*/i(se,{element:p({},t[e],{"#webform_key":t["#webform_key"],"#access":t[e]["#access"]?t[e]["#access"]:t["#access"],"#disabled":t["#disabled"],"#required":t["#required"],"#date_date_min":t["#date_date_min"],"#date_date_max":t["#date_date_max"],"#date_time_min":t["#date_time_min"],"#date_time_max":t["#date_time_max"],"#states":t["#states"]}),error:a?a[e]:null,setValue:t=>{r(`${"date"===e?t:u}T${"time"===e?t:m}`)},labelProps:o,fieldProps:l,value:y[e]?y[e]:""},e))})}))}))),we=J(M(z(Y(({element:e,setValue:t,value:r="",fieldProps:n})=>{var s,a;/*#__PURE__*/return i(d,{children:/*#__PURE__*/i("input",p({type:"time",name:e["#name"],onChange:e=>(async e=>{t(e.target.value)})(e),disabled:e["#disabled"],hidden:!e["#access"],required:e["#required"],readOnly:e["#readonly"],value:r},n,{id:e["#id"],min:null!=(s=e["#date_time_min"])?s:null,max:null!=(a=e["#date_time_max"])?a:null}))})})))),ke=J(M(z(({element:s,error:a,setValue:l,fieldProps:o,labelProps:c,wrapperProps:d={}})=>{const[u,m]=t({}),y=f(s),{registerField:h}=n(b);e.useEffect(()=>{s["#parents"]&&h(g(s["#parents"]),{validate:e=>{if(!e)return;const t=new RegExp("^((19|20)\\d{2})-((0|1)\\d{1})-((0|1|2)\\d{1})T(2[0-3]|[01][0-9]):[0-5][0-9]"),r=new RegExp("^((19|20)\\d{2})-((0|1)\\d{1})-((0|1|2)\\d{1})T(2[0-3]|[01][0-9]):[0-5][0-9]:[0-5][0-9]");return t.test(e)||r.test(e)?D(e,s):"The value is invalid. Please fill out every field."}})},[]),r(()=>{if(Object.keys(u)[0]&&Object.values(u).every(e=>null!==e)){let e;const t=u.ampm&&"pm"===u.ampm;let r;if(e=u.hour?t?u.hour+12:u.hour:t?12:"00",u.month){const e=s.month["#options"];r=Object.keys(e).find(t=>e[t]===u.month)}else r="1";const n=u.day?u.day:"1",a=u.year?u.year:(new Date).getFullYear(),o=e,i=u.minute?u.minute:"00",c=u.second?u.second:null;l(c?`${a}-${_(r)}-${_(n)}T${_(o)}:${i}:${c}`:`${a}-${_(r)}-${_(n)}T${_(o)}:${i}`)}else Object.values(u).some(e=>null!==e)&&l(u)},[u]),r(()=>{y.map(e=>{m(t=>p({},t,{[e]:null}))})},[]);const _=e=>e<=9?e="0"+e:e;/*#__PURE__*/return i(K,p({label:s["#title"],labelDisplay:s["#title_display"],access:s["#access"],isRequired:!1,error:a},d,{children:/*#__PURE__*/i("div",{id:s["#id"],children:y.map((e,t)=>/*#__PURE__*/i(se,{element:p({},s[e],{"#webform_key":s["#webform_key"],"#disabled":s["#disabled"],"#access":s["#access"],"#required":s["#required"],"#states":s["#states"]}),error:a?a[e]:null,setValue:t=>{m(p({},u,{[e]:t}))},labelProps:c,fieldProps:o,value:u[e]?u[e]:""},t))})}))}))),xe=J(M(z(Y(({element:t,setValue:r,value:s="",fieldProps:a})=>{const{registerField:l}=n(b);return e.useEffect(()=>{t["#parents"]&&l(g(t["#parents"]),{validate:e=>{if(e)return D(e,t)}})},[]),/*#__PURE__*/i(d,{children:/*#__PURE__*/i("input",p({onChange:e=>(async e=>{r(e.target.value)})(e),type:t["#type"],name:t["#name"],disabled:t["#disabled"],hidden:!t["#access"],required:t["#required"],readOnly:t["#readonly"],value:s},a,{id:t["#id"],min:t["#date_date_min"]?V(t["#date_date_min"]):null,max:t["#date_date_max"]?V(t["#date_date_max"]):null}))})})))),Pe=J(M(({element:e})=>!1===e["#access"]?null:/*#__PURE__*/i("div",{children:/*#__PURE__*/i("label",{children:e["#title"]})})));const Oe=({element:e,wrapperProps:t})=>{const r=[],{registry:s,setData:a}=n(b),l={submit:()=>{},reset:e=>{e.preventDefault(),a(()=>({}))}},o=s.getComponent("button");return Object.keys(l).forEach(t=>{e[t]&&r.push(/*#__PURE__*/i(o,{element:e[t],fieldProps:{type:"submit",onClick:l[t]}},t))}),/*#__PURE__*/i("div",p({},t,{children:r}))},je={radios:"radio",checkboxes:"checkbox",webform_radios_other:"radio",webform_checkboxes_other:"checkbox",webform_entity_checkboxes:"checkbox",webform_entity_radios:"radio"};var Ce=J(z(Y(({element:e,value:n=[],setValue:s,error:a,fieldProps:l})=>{if(!(e["#type"]in je))throw new Error(`${e["#type"]} which was used on ${e["#webform_key"]} is not supported by WebformCheckboxRadioGroup.`);const[o,u]=t(null),[m,b]=t(!1),y=je[e["#type"]],h="webform_checkboxes_other"===e["#type"]||"webform_radios_other"===e["#type"],_=h?e.other:null,g=function(){let t={};const r={};if(h)for(const r of Object.keys(e))"radios"!==r&&"checkboxes"!==r||(t=e[r]);else t=e;for(const e of Object.keys(t["#options"]))"_other_"!==e&&(r[e]=t["#options"][e]);return r}();r(()=>{if(e["#default_value"]&&!e["#default_value"].headers){s(e["#default_value"]);const t="string"==typeof e["#default_value"]?[e["#default_value"]]:e["#default_value"],r=t.filter(e=>Object.hasOwn(g,e));if("checkbox"===y&&s(r),h&&Object.keys(t).length!==Object.keys(r).length)for(const e of t)Object.hasOwn(g,e)||u(e)}},[]),r(()=>{o&&"checkbox"===y?s([...Array.isArray(n)?n:[],o]):o&&"radio"===y&&s(o)},[o]);const v=f(e).map(t=>"other"!==t&&"radios"!==t&&"checkboxes"!==t?/*#__PURE__*/i(se,{element:p({},e[t],{"#webform_key":e["#webform_key"],"#states":e["#states"],"#access":e["#access"]}),fieldProps:l,setValue:r=>{if("checkboxes"===e["#type"]||"webform_entity_checkboxes"===e["#type"]){if(!0===r)s([...Array.isArray(n)?n:[],e[t]["#return_value"]]);else if(Array.isArray(n)&&n.length){const r=n.filter(r=>r!==e[t]["#return_value"]);s(r)}}else s(e[t]["#return_value"])},value:Array.isArray(n)&&n.includes(e[t]["#return_value"])||n===e[t]["#return_value"],error:a},t):"checkboxes"==t||"radios"==t?f(e[t]).map(r=>/*#__PURE__*/i(se,{fieldProps:l,element:p({},e[t][r],{"#webform_key":e["#webform_key"],"#states":e["#states"],"#access":e["#access"]}),setValue:a=>{if("checkbox"===e[t][r]["#type"]){if("_other_"===e[t][r]["#return_value"])a?(u(null!=o?o:""),b(!0)):(b(!1),u(null));else if(!0===a)s([...Array.isArray(n)?n:[],e[t][r]["#return_value"]]);else if(Array.isArray(n)&&n.length){const a=n.filter(n=>n!==e[t][r]["#return_value"]);s(a)}}else"_other_"===e[t][r]["#return_value"]?(u(null!=o?o:""),s(null!=o?o:""),b(!0)):(b(!1),u(null),s(e[t][r]["#return_value"]))},value:Array.isArray(n)&&n.includes(e[t][r]["#return_value"])||n===e[t][r]["#return_value"]||"_other_"===e[t][r]["#return_value"]&&m,error:a},r)):void 0);/*#__PURE__*/return c(d,{children:[v,h&&m?/*#__PURE__*/i(se,{element:p({},e,{"#type":_["#type"],"#webform_key":e["#webform_key"],"#title":_["#title"],"#description":_["#description"],"#id":`${e["#id"]}-other-input`}),value:o,setValue:e=>{u(e)}}):null]})},{defaultWrapperType:"fieldset",labelFor:!1}))),qe=z(({element:e,fieldProps:t})=>/*#__PURE__*/i("button",p({type:"button"},t,{children:e["#value"]}))),$e=z(({element:e,error:t,fieldProps:r={},tdProps:a={}})=>{const{data:l,setData:o}=n(b);/*#__PURE__*/return i("tr",p({},r,{children:f(e).map(r=>{var n;const c=e["#states"]?p({},e[r]["#states"],e["#states"]):null,d=e["#states"]?Object.assign({},c,e["#states"]):c;/*#__PURE__*/return s("td",p({},p({},a,I(null!=(n=e[r]["#wrapper_attributes"])?n:{})),{key:r}),/*#__PURE__*/i(se,{element:p({},d?p({"#states":d},e[r]):e[r],{"#wrapper_attributes":[]}),error:t,value:l[e[r]["#webform_key"]],setValue:t=>{o(n=>p({},n,{[e[r]["#webform_key"]]:t}))}},r))})}))});const Se=({submission:e})=>/*#__PURE__*/i("pre",{children:/*#__PURE__*/i("code",{id:"submitted-data",children:JSON.stringify(e)})});var Te=J(z(Y(({element:e,fieldProps:t})=>{const{data:r,setData:s,errors:a}=n(b),l=f(e).map(t=>{const n=e["#states"]?p({},e[t]["#states"],e["#states"]):null;/*#__PURE__*/return i(se,{element:p({},e[t],n?{"#states":n,"#access":!0}:{"#access":!0}),error:a[e[t]["#webform_key"]],value:r[e[t]["#webform_key"]],setValue:r=>{s(n=>p({},n,{[e[t]["#webform_key"]]:r}))}},e[t]["#webform_key"])});/*#__PURE__*/return i(d,{children:/*#__PURE__*/i("div",p({},t,{children:l}))})},{defaultWrapperType:"container"})));const Ne=({elements:e})=>{var r;const[n,s]=t(0),a=f(e),l=e[a[n]],o=n>0,d=n===a.length-2,u=null==(r=e.actions)?void 0:r.submit,m=t=>{if(l["#title"]==e[t]["#title"])return{color:"blue"}};/*#__PURE__*/return c("div",{children:[/*#__PURE__*/i("ul",{style:{display:"flex"},children:a.map(t=>/*#__PURE__*/c("li",{style:m(t),children:[e[t]["#title"],"----",">"]},t))}),/*#__PURE__*/i("br",{}),/*#__PURE__*/c("h1",{children:["Page Title: ",l["#title"]]}),/*#__PURE__*/c("h1",{children:["Current page: ",n+1]}),/*#__PURE__*/i(Te,{element:p({},l)}),o&&/*#__PURE__*/i("button",{style:{border:"solid"},type:"button",onClick:()=>s(e=>e-1),children:"Previous"}),/*#__PURE__*/i("button",{style:{border:"solid"},type:"button",onClick:()=>s(e=>e+1),children:"Next"}),d&&/*#__PURE__*/i(se,{element:u})]})},De={textfield:ee,number:ee,hidden:ee,email:ee,search:ee,tel:ee,url:ee,textarea:re,autocomplete:Q,checkbox:fe,checkboxes:Ce,entity_autocomplete:Q,range:me,radio:fe,radios:Ce,select:te,webform_autocomplete:Q,webform_checkboxes_other:Ce,webform_entity_checkboxes:Ce,webform_entity_radios:Ce,webform_radios_other:Ce,webform_rating:be,webform_select_other:te,webform_terms_of_service:ge,container:oe,fieldset:ce,webform_flexbox:ie,webform_section:de,webform_table:pe,webform_table_row:$e,webform_address:le,webform_contact:le,webform_name:le,webform_link:le,webform_custom_composite:({element:e,error:t,value:n,setValue:s,labelProps:a})=>{const l=f(e["#element"]),o=!!e.add;return r(()=>{e["#default_value"]&&Array.isArray(e["#default_value"])?s(e["#default_value"]):s([{}])},[]),/*#__PURE__*/i(d,{children:o?/*#__PURE__*/i(d,{children:/*#__PURE__*/i(ae,{element:e,value:n,setValue:s,error:t})}):/*#__PURE__*/i(K,{label:e["#title"],labelDisplay:e["#title_display"],access:e["#access"],isRequired:!1,error:t,children:l.map((r,l)=>{const o=e.items[0][r];/*#__PURE__*/return i(se,{element:p({},o,{"#webform_key":r,"#states":e["#_webform_states"],"#id":o["#id"],"#default_value":void 0}),value:n&&n[0][r]?n[0][r]:"",setValue:e=>{s(n&&n[0]?[p({},n[0],{[r]:e})]:[{[r]:e}])},error:t?t[r]:null,labelProps:a},l)})})})},date:xe,datelist:ke,datetime:ve,webform_time:we,button:qe,submit:Oe,item:Pe,value:he,webform_actions:Oe,webform_email_confirm:ye,webform_multiple:ae,confirmation_page:({webform:e})=>/*#__PURE__*/i("div",{children:e.confirmation.message&&e.confirmation.message.length>0?e.confirmation.message:/*#__PURE__*/c(d,{children:["New submission added to ",/*#__PURE__*/i("em",{children:e.title}),"."]})}),form_layout:({webform:e,status:t})=>{const{registry:s,setData:a,data:l,errors:o}=n(b),{elements:u,confirmation:m}=e,y=f(u),h=y.some(e=>"webform_wizard_page"===u[e]["#type"]);r(()=>{"debug"===m.type&&"success"!==t&&window.localStorage.setItem("webformDebugData",JSON.stringify(l))},[l,t,m.type]);const _=()=>/*#__PURE__*/i(d,{children:y.map(e=>/*#__PURE__*/i(se,{element:u[e],setValue:t=>{a(r=>p({},r,{[u[e]["#webform_key"]]:t}))},value:l[u[e]["#webform_key"]],error:o[u[e]["#webform_key"]]},u[e]["#webform_key"]))});if("success"===t){if("debug"===m.type){const e="undefined"==typeof window?l:JSON.parse(window.localStorage.getItem("webformDebugData"));/*#__PURE__*/return i(Se,{submission:e})}if("page"===m.type||"inline"===m.type)return(()=>{const t=s.getComponent("confirmation_page");/*#__PURE__*/return i(t,{webform:e,submission:l})})();if("message"===m.type){const t=s.getComponent("message");/*#__PURE__*/return c(d,{children:[/*#__PURE__*/i(t,{type:"success",children:e.confirmation.message&&e.confirmation.message.length>0?e.confirmation.message:/*#__PURE__*/c(d,{children:["New submission added to ",/*#__PURE__*/i("em",{children:e.title}),"."]})}),_()]})}if("none"===m.type)return _()}if(h){for(const[e,t]of Object.entries(u))"object"==typeof t&&null!==t&&Object.keys(t).includes("#access")&&(u[e]["#access"]=!0);/*#__PURE__*/return i(Ne,{elements:u})}return _()},message:({children:e})=>/*#__PURE__*/i("div",{children:e}),webform_wizard_page:Te,webform_message:({element:e})=>/*#__PURE__*/i("div",{dangerouslySetInnerHTML:{__html:e["#message_message"]["#markup"]}}),webform_markup:({element:e})=>/*#__PURE__*/i("div",{dangerouslySetInnerHTML:{__html:e["#markup"]}})},Ve=new class{constructor(e={}){this._registry=void 0,this.getComponent=e=>{var t;return null!=(t=this._registry.get(e))?t:null},this.setComponent=(e,t)=>{this._registry.set(e,t)},this._registry=new Map,Object.keys(e).forEach(t=>{this._registry.set(t,e[t])})}}(De),Ee=["data","id","customComponents","onSubmit","apiUrl","validate"];class Ae extends Error{constructor(e){super(),this.response=void 0,this.response=e}}const Fe=n=>{let{data:s,id:o,customComponents:d={},onSubmit:u,apiUrl:f="/api/webform",validate:y}=n,h=m(n,Ee);const _=Ve;O(()=>{Object.keys(d).forEach(e=>{_.setComponent(e,d[e])})}),r(()=>{Object.keys(d).forEach(e=>{_.setComponent(e,d[e])})},[d]);const[g,w]=t({}),[k,P]=t(),[j,C]=t({}),q=a({}),$=e.useCallback((e,{validate:t})=>{q.current[e]={validate:t}},[]),T=e.useCallback(e=>{delete q.current[e]},[]),N=u||R,D=_.getComponent("form_layout"),V=_.getComponent("message"),E=e=>{const t=Object.keys(q.current).filter(e=>x(q.current[e].validate)),r=t.map(t=>{return r=t,n=e[t],new Promise(e=>e(q.current[r].validate(n)));var r,n});return Promise.all(r).then(e=>e.reduce((e,r,n)=>(void 0===r||v(e,t[n],r),e),{}))};/*#__PURE__*/return c("form",p({},h,{onSubmit:e=>{var t;e.preventDefault(),(t=j,Promise.all([E(t),y?y(t):{}]).then(([e,t])=>l.all([e,t],{arrayMerge:S}))).then(t=>{0!==Object.keys(t).length?(P("error"),w(t)):N({id:o,event:e,data:j,setData:C,setStatus:P,setErrors:w,apiUrl:f})})},children:["error"===k?/*#__PURE__*/i(V,{type:"error",children:"An error occurred. Please try again."}):null,/*#__PURE__*/i(b.Provider,{value:{id:o,apiUrl:f,data:j,setData:C,setStatus:P,errors:g,registry:_,registerField:$,unregisterField:T},children:/*#__PURE__*/i(D,{webform:s,status:k})})]}))},Re=({element:e,error:t,value:r,setValue:n})=>{const s=async e=>{n(p({},r,{[e.target.name]:e.target.value}))};/*#__PURE__*/return i(K,{labelFor:e["#key"],label:e["#title"],isRequired:e["#required"],access:e["#access"],settings:null,error:t,children:/*#__PURE__*/c("div",{style:{display:"inline-flex",alignItems:"center"},children:[/*#__PURE__*/i("input",{type:"number",name:"feet",min:0,max:8,onChange:e=>s(e)}),/*#__PURE__*/i("label",{style:{padding:"0.5em"},children:"feet"}),/*#__PURE__*/i("input",{type:"number",name:"inches",min:0,max:11,onChange:e=>s(e)}),/*#__PURE__*/i("label",{style:{padding:"0.5em"},children:"inches"})]})})};async function Me(e,t,r){if("GET"===e.method){if("autocomplete_options"===e.query.op.toString()){const{id:n,options_id:s}=e.query,a=r.buildUrl(`/webform_rest/${n.toString()}/autocomplete_options/${s}?_format=json`),l=await r.fetch(a.toString(),{headers:{"Content-Type":"application/json"}});if(!l.ok){const e=await l.json();return t.status(l.status).json({message:e})}return t.end(JSON.stringify(await l.json())),t.status(200),t}return t.end("{}"),t.status(404),t}if("POST"===e.method){const n=r.buildUrl("/webform_rest/submit?_format=json"),s=await r.fetch(n.toString(),{method:"POST",body:JSON.stringify(e.body),headers:{"Content-Type":"application/json"}});if(!s.ok){const e=await s.json();return t.status(s.status).json({message:e})}return t.end(JSON.stringify(s)),t.status(200),t}}export{Fe as Webform,b as WebformContext,Me as WebformDefaultApiRoute,Ae as WebformError,Re as WebformHeight,S as arrayMerge,D as checkDateMinMax,De as components,V as convertDateToISO,j as cssStringToObject,R as defaultOnSubmit,f as getChildElements,$ as getCurrentError,q as getIndexOfMultiValue,h as getNormalizedErrorMessages,x as isFunction,k as isInteger,P as isIterable,w as isObject,A as normalizeElements,C as reactPropertyMap,N as resolvePath,F as resolveWebformContent,v as setIn,g as toKey,_ as toPath,T as updateNameAndIdWithIndex,O as useConstructor};
//# sourceMappingURL=index.modern.mjs.map
